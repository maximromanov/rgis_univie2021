<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 L10: GIS IV | 070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), R Edition</title>
  <meta name="description" content="This is a collection of relevant materials for the class ‘070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), R Edition,’ offered at the University of Vienna and taught by Maxim G. Romanov" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="10 L10: GIS IV | 070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), R Edition" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://maximromanov.github.io/rgis_univie2021/" />
  
  <meta property="og:description" content="This is a collection of relevant materials for the class ‘070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), R Edition,’ offered at the University of Vienna and taught by Maxim G. Romanov" />
  <meta name="github-repo" content="maximromanov/rgis_univie2021" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 L10: GIS IV | 070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), R Edition" />
  
  <meta name="twitter:description" content="This is a collection of relevant materials for the class ‘070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), R Edition,’ offered at the University of Vienna and taught by Maxim G. Romanov" />
  

<meta name="author" content="Maxim G. Romanov" />


<meta name="date" content="2021-05-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="l09-gis-iii.html"/>
<link rel="next" href="l11-gis-v.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), <i>R Edition</i></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preliminaries</a></li>
<li class="chapter" data-level="1" data-path="l01-intro.html"><a href="l01-intro.html"><i class="fa fa-check"></i><b>1</b> L01: Intro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="l01-intro.html"><a href="l01-intro.html#general-introduction-making-sure-everything-works-getting-to-know-r"><i class="fa fa-check"></i><b>1.1</b> General Introduction: Making Sure Everything Works; Getting to know <code id="H01">R</code></a></li>
<li class="chapter" data-level="1.2" data-path="l01-intro.html"><a href="l01-intro.html#goalsg01"><i class="fa fa-check"></i><b>1.2</b> Goals{G01}</a></li>
<li class="chapter" data-level="1.3" data-path="l01-intro.html"><a href="l01-intro.html#S01"><i class="fa fa-check"></i><b>1.3</b> Software</a></li>
<li class="chapter" data-level="1.4" data-path="l01-intro.html"><a href="l01-intro.html#class01"><i class="fa fa-check"></i><b>1.4</b> Class</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="l01-intro.html"><a href="l01-intro.html#installing-rmarkdown"><i class="fa fa-check"></i><b>1.4.1</b> Installing <code id="instR">rmarkdown</code></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="l01-intro.html"><a href="l01-intro.html#starting01"><i class="fa fa-check"></i><b>1.5</b> Starting with our first workbook</a></li>
<li class="chapter" data-level="1.6" data-path="l01-intro.html"><a href="l01-intro.html#TC01"><i class="fa fa-check"></i><b>1.6</b> Topics covered</a></li>
<li class="chapter" data-level="1.7" data-path="l01-intro.html"><a href="l01-intro.html#RM01"><i class="fa fa-check"></i><b>1.7</b> Reference materials</a></li>
<li class="chapter" data-level="1.8" data-path="l01-intro.html"><a href="l01-intro.html#homeworkhw01"><i class="fa fa-check"></i><b>1.8</b> Homework{HW01}</a></li>
<li class="chapter" data-level="1.9" data-path="l01-intro.html"><a href="l01-intro.html#common-issues-with-homework"><i class="fa fa-check"></i><b>1.9</b> Common issues with homework</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="l01-intro.html"><a href="l01-intro.html#tracing-errors"><i class="fa fa-check"></i><b>1.9.1</b> Tracing errors</a></li>
<li class="chapter" data-level="1.9.2" data-path="l01-intro.html"><a href="l01-intro.html#comments-commenting-out"><i class="fa fa-check"></i><b>1.9.2</b> Comments / “Commenting out”</a></li>
<li class="chapter" data-level="1.9.3" data-path="l01-intro.html"><a href="l01-intro.html#random-errors"><i class="fa fa-check"></i><b>1.9.3</b> Random errors</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="l01-intro.html"><a href="l01-intro.html#submitting-homeworksh01"><i class="fa fa-check"></i><b>1.10</b> Submitting homework{SH01}</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="l02-basics-i.html"><a href="l02-basics-i.html"><i class="fa fa-check"></i><b>2</b> L02: Basics I</a>
<ul>
<li class="chapter" data-level="2.1" data-path="l02-basics-i.html"><a href="l02-basics-i.html#basics-of-r-data-structures-and-subsetting"><i class="fa fa-check"></i><b>2.1</b> Basics of R: Data Structures and Subsetting</a></li>
<li class="chapter" data-level="2.2" data-path="l02-basics-i.html"><a href="l02-basics-i.html#G02"><i class="fa fa-check"></i><b>2.2</b> Goals</a></li>
<li class="chapter" data-level="2.3" data-path="l02-basics-i.html"><a href="l02-basics-i.html#software02"><i class="fa fa-check"></i><b>2.3</b> Software{#02}</a></li>
<li class="chapter" data-level="2.4" data-path="l02-basics-i.html"><a href="l02-basics-i.html#class02"><i class="fa fa-check"></i><b>2.4</b> Class</a></li>
<li class="chapter" data-level="2.5" data-path="l02-basics-i.html"><a href="l02-basics-i.html#topics02"><i class="fa fa-check"></i><b>2.5</b> Topics: Data Structures &amp; Types</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="l02-basics-i.html"><a href="l02-basics-i.html#addnotes02"><i class="fa fa-check"></i><b>2.5.1</b> Additional notes</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="l02-basics-i.html"><a href="l02-basics-i.html#REF02"><i class="fa fa-check"></i><b>2.6</b> Reference materials</a></li>
<li class="chapter" data-level="2.7" data-path="l02-basics-i.html"><a href="l02-basics-i.html#HW02"><i class="fa fa-check"></i><b>2.7</b> Homework</a></li>
<li class="chapter" data-level="2.8" data-path="l02-basics-i.html"><a href="l02-basics-i.html#SH02"><i class="fa fa-check"></i><b>2.8</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html"><i class="fa fa-check"></i><b>3</b> L03: Basics II</a>
<ul>
<li class="chapter" data-level="3.1" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#basicII03"><i class="fa fa-check"></i><b>3.1</b> Data Manipulation &amp; Exloratory Analysis</a></li>
<li class="chapter" data-level="3.2" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#some-comments-on-the-previous-lesson-homework"><i class="fa fa-check"></i><b>3.2</b> Some comments on the previous lesson homework:</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#mess-with-attachments"><i class="fa fa-check"></i><b>3.2.1</b> Mess with “attachments”</a></li>
<li class="chapter" data-level="3.2.2" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#vector-operations"><i class="fa fa-check"></i><b>3.2.2</b> Vector operations</a></li>
<li class="chapter" data-level="3.2.3" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#na-value"><i class="fa fa-check"></i><b>3.2.3</b> <code>NA</code> Value?</a></li>
<li class="chapter" data-level="3.2.4" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#many-vs-many"><i class="fa fa-check"></i><b>3.2.4</b> <code>many</code> Vs <code>"many"</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#G03"><i class="fa fa-check"></i><b>3.3</b> Goals</a></li>
<li class="chapter" data-level="3.4" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#class03"><i class="fa fa-check"></i><b>3.4</b> Class</a></li>
<li class="chapter" data-level="3.5" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#topics03"><i class="fa fa-check"></i><b>3.5</b> Topics</a></li>
<li class="chapter" data-level="3.6" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#REF03"><i class="fa fa-check"></i><b>3.6</b> Reference materials</a></li>
<li class="chapter" data-level="3.7" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#HW03"><i class="fa fa-check"></i><b>3.7</b> Homework</a></li>
<li class="chapter" data-level="3.8" data-path="l03-basics-ii.html"><a href="l03-basics-ii.html#SHW03"><i class="fa fa-check"></i><b>3.8</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html"><i class="fa fa-check"></i><b>4</b> L04: Basics III</a>
<ul>
<li class="chapter" data-level="4.1" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#DATAVIZ04"><i class="fa fa-check"></i><b>4.1</b> Data Visualization; Functions</a></li>
<li class="chapter" data-level="4.2" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#G04"><i class="fa fa-check"></i><b>4.2</b> Goals</a></li>
<li class="chapter" data-level="4.3" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#CL04"><i class="fa fa-check"></i><b>4.3</b> Class</a></li>
<li class="chapter" data-level="4.4" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#TOP04"><i class="fa fa-check"></i><b>4.4</b> Topics</a></li>
<li class="chapter" data-level="4.5" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#REF04"><i class="fa fa-check"></i><b>4.5</b> Reference materials</a></li>
<li class="chapter" data-level="4.6" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#HW04"><i class="fa fa-check"></i><b>4.6</b> Homework</a></li>
<li class="chapter" data-level="4.7" data-path="l04-basics-iii.html"><a href="l04-basics-iii.html#SHW04"><i class="fa fa-check"></i><b>4.7</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="l05-data-i.html"><a href="l05-data-i.html"><i class="fa fa-check"></i><b>5</b> L05: Data I</a>
<ul>
<li class="chapter" data-level="5.1" data-path="l05-data-i.html"><a href="l05-data-i.html#collecting-organizing-creating"><i class="fa fa-check"></i><b>5.1</b> Collecting, Organizing, Creating</a></li>
<li class="chapter" data-level="5.2" data-path="l05-data-i.html"><a href="l05-data-i.html#G05"><i class="fa fa-check"></i><b>5.2</b> Goals</a></li>
<li class="chapter" data-level="5.3" data-path="l05-data-i.html"><a href="l05-data-i.html#SOFT05"><i class="fa fa-check"></i><b>5.3</b> Software &amp; Other Required Materials</a></li>
<li class="chapter" data-level="5.4" data-path="l05-data-i.html"><a href="l05-data-i.html#INCLASSI05"><i class="fa fa-check"></i><b>5.4</b> In Class I: <em>Theoretical and Conceptual</em></a></li>
<li class="chapter" data-level="5.5" data-path="l05-data-i.html"><a href="l05-data-i.html#ways-of-obtaining-data"><i class="fa fa-check"></i><b>5.5</b> Ways of obtaining data</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="l05-data-i.html"><a href="l05-data-i.html#using-ocr"><i class="fa fa-check"></i><b>5.5.1</b> Using OCR</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="l05-data-i.html"><a href="l05-data-i.html#MainFormat05"><i class="fa fa-check"></i><b>5.6</b> Main format</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="l05-data-i.html"><a href="l05-data-i.html#note-on-the-csvtsv-format"><i class="fa fa-check"></i><b>5.6.1</b> Note on the <code>CSV</code>/<code>TSV</code> format</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="l05-data-i.html"><a href="l05-data-i.html#basic-principles-of-organizing-data-tidy-data"><i class="fa fa-check"></i><b>5.7</b> Basic principles of organizing data: <em>Tidy Data</em></a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="l05-data-i.html"><a href="l05-data-i.html#tidy-data"><i class="fa fa-check"></i><b>5.7.1</b> Tidy Data</a></li>
<li class="chapter" data-level="5.7.2" data-path="l05-data-i.html"><a href="l05-data-i.html#clean-data"><i class="fa fa-check"></i><b>5.7.2</b> Clean Data</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="l05-data-i.html"><a href="l05-data-i.html#INCLASSII05"><i class="fa fa-check"></i><b>5.8</b> In Class II: <em>Practical</em></a></li>
<li class="chapter" data-level="5.9" data-path="l05-data-i.html"><a href="l05-data-i.html#morris-dataset-the-east-vs.-the-west"><i class="fa fa-check"></i><b>5.9</b> Morris Dataset: <em>the East Vs. the West</em></a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="l05-data-i.html"><a href="l05-data-i.html#difficulty-easy"><i class="fa fa-check"></i><b>5.9.1</b> Difficulty: Easy</a></li>
<li class="chapter" data-level="5.9.2" data-path="l05-data-i.html"><a href="l05-data-i.html#difficulty-more-complicated"><i class="fa fa-check"></i><b>5.9.2</b> Difficulty: More complicated</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="l05-data-i.html"><a href="l05-data-i.html#viennese-districts"><i class="fa fa-check"></i><b>5.10</b> Viennese Districts</a></li>
<li class="chapter" data-level="5.11" data-path="l05-data-i.html"><a href="l05-data-i.html#RM05"><i class="fa fa-check"></i><b>5.11</b> Reference Materials</a></li>
<li class="chapter" data-level="5.12" data-path="l05-data-i.html"><a href="l05-data-i.html#ADD05"><i class="fa fa-check"></i><b>5.12</b> Additional</a></li>
<li class="chapter" data-level="5.13" data-path="l05-data-i.html"><a href="l05-data-i.html#AR05"><i class="fa fa-check"></i><b>5.13</b> Additional Readings</a></li>
<li class="chapter" data-level="5.14" data-path="l05-data-i.html"><a href="l05-data-i.html#HW05"><i class="fa fa-check"></i><b>5.14</b> Homework</a></li>
<li class="chapter" data-level="5.15" data-path="l05-data-i.html"><a href="l05-data-i.html#SH05"><i class="fa fa-check"></i><b>5.15</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="l06-data-ii.html"><a href="l06-data-ii.html"><i class="fa fa-check"></i><b>6</b> L06: Data II</a>
<ul>
<li class="chapter" data-level="6.1" data-path="l06-data-ii.html"><a href="l06-data-ii.html#modeling-manipulating"><i class="fa fa-check"></i><b>6.1</b> Modeling &amp; Manipulating</a></li>
<li class="chapter" data-level="6.2" data-path="l06-data-ii.html"><a href="l06-data-ii.html#TAG06"><i class="fa fa-check"></i><b>6.2</b> Goals</a></li>
<li class="chapter" data-level="6.3" data-path="l06-data-ii.html"><a href="l06-data-ii.html#SOFT06"><i class="fa fa-check"></i><b>6.3</b> Software</a></li>
<li class="chapter" data-level="6.4" data-path="l06-data-ii.html"><a href="l06-data-ii.html#additional-materials"><i class="fa fa-check"></i><b>6.4</b> Additional Materials</a></li>
<li class="chapter" data-level="6.5" data-path="l06-data-ii.html"><a href="l06-data-ii.html#INCLASSI06"><i class="fa fa-check"></i><b>6.5</b> In Class I: <em>Theoretical and Conceptual</em></a></li>
<li class="chapter" data-level="6.6" data-path="l06-data-ii.html"><a href="l06-data-ii.html#WAYS06"><i class="fa fa-check"></i><b>6.6</b> Ways of modeling data: Categorization</a></li>
<li class="chapter" data-level="6.7" data-path="l06-data-ii.html"><a href="l06-data-ii.html#NORM06"><i class="fa fa-check"></i><b>6.7</b> Normalization</a></li>
<li class="chapter" data-level="6.8" data-path="l06-data-ii.html"><a href="l06-data-ii.html#note-proxies-features-abstractions"><i class="fa fa-check"></i><b>6.8</b> Note: <em>Proxies</em>, <em>Features</em>, <em>Abstractions</em></a></li>
<li class="chapter" data-level="6.9" data-path="l06-data-ii.html"><a href="l06-data-ii.html#INCLASSII06"><i class="fa fa-check"></i><b>6.9</b> In Class II: <em>Practical</em></a></li>
<li class="chapter" data-level="6.10" data-path="l06-data-ii.html"><a href="l06-data-ii.html#SI06"><i class="fa fa-check"></i><b>6.10</b> <em>Bosker et al.</em> Dataset</a></li>
<li class="chapter" data-level="6.11" data-path="l06-data-ii.html"><a href="l06-data-ii.html#RM06"><i class="fa fa-check"></i><b>6.11</b> Reference Materials</a></li>
<li class="chapter" data-level="6.12" data-path="l06-data-ii.html"><a href="l06-data-ii.html#AR06"><i class="fa fa-check"></i><b>6.12</b> Additional Readings</a></li>
<li class="chapter" data-level="6.13" data-path="l06-data-ii.html"><a href="l06-data-ii.html#HW06"><i class="fa fa-check"></i><b>6.13</b> Homework</a></li>
<li class="chapter" data-level="6.14" data-path="l06-data-ii.html"><a href="l06-data-ii.html#SH06"><i class="fa fa-check"></i><b>6.14</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="l07-gis-i.html"><a href="l07-gis-i.html"><i class="fa fa-check"></i><b>7</b> L07: GIS I</a>
<ul>
<li class="chapter" data-level="7.1" data-path="l07-gis-i.html"><a href="l07-gis-i.html#georeferencing-geocoding"><i class="fa fa-check"></i><b>7.1</b> Georeferencing &amp; Geocoding</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="l07-gis-i.html"><a href="l07-gis-i.html#TAG07"><i class="fa fa-check"></i><b>7.1.1</b> Goals</a></li>
<li class="chapter" data-level="7.1.2" data-path="l07-gis-i.html"><a href="l07-gis-i.html#SOFT07"><i class="fa fa-check"></i><b>7.1.2</b> Software</a></li>
<li class="chapter" data-level="7.1.3" data-path="l06-data-ii.html"><a href="l06-data-ii.html#additional-materials"><i class="fa fa-check"></i><b>7.1.3</b> Additional Materials</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="l07-gis-i.html"><a href="l07-gis-i.html#georeferencing"><i class="fa fa-check"></i><b>7.2</b> Georeferencing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="l07-gis-i.html"><a href="l07-gis-i.html#qgis"><i class="fa fa-check"></i><b>7.2.1</b> QGIS</a></li>
<li class="chapter" data-level="7.2.2" data-path="l07-gis-i.html"><a href="l07-gis-i.html#step-by-step-instructions"><i class="fa fa-check"></i><b>7.2.2</b> Step-by-step instructions</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="l07-gis-i.html"><a href="l07-gis-i.html#georeferencing-maps-without-a-grid"><i class="fa fa-check"></i><b>7.3</b> Georeferencing maps without a grid</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="l07-gis-i.html"><a href="l07-gis-i.html#collecting-point-data-very-simple-way"><i class="fa fa-check"></i><b>7.3.1</b> Collecting Point Data (Very Simple Way)</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="l07-gis-i.html"><a href="l07-gis-i.html#geocoding"><i class="fa fa-check"></i><b>7.4</b> Geocoding</a></li>
<li class="chapter" data-level="7.5" data-path="l07-gis-i.html"><a href="l07-gis-i.html#reverse-geocoding"><i class="fa fa-check"></i><b>7.5</b> Reverse Geocoding</a></li>
<li class="chapter" data-level="7.6" data-path="l07-gis-i.html"><a href="l07-gis-i.html#HW07"><i class="fa fa-check"></i><b>7.6</b> Homework</a></li>
<li class="chapter" data-level="7.7" data-path="l07-gis-i.html"><a href="l07-gis-i.html#SH07"><i class="fa fa-check"></i><b>7.7</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html"><i class="fa fa-check"></i><b>8</b> L08: GIS II</a>
<ul>
<li class="chapter" data-level="8.1" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#creating-base-maps"><i class="fa fa-check"></i><b>8.1</b> Creating Base Maps</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#TAG08"><i class="fa fa-check"></i><b>8.1.1</b> Goals</a></li>
<li class="chapter" data-level="8.1.2" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#SOFT08"><i class="fa fa-check"></i><b>8.1.2</b> Software</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#core-concepts-and-their-practical-implementations"><i class="fa fa-check"></i><b>8.2</b> Core concepts and their practical implementations</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#projection-issues"><i class="fa fa-check"></i><b>8.2.1</b> Projection Issues</a></li>
<li class="chapter" data-level="8.2.2" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#a-digital-map-layers-of-goodness"><i class="fa fa-check"></i><b>8.2.2</b> A Digital Map: Layers of Goodness</a></li>
<li class="chapter" data-level="8.2.3" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#main-types-of-data-points-lines-polygons"><i class="fa fa-check"></i><b>8.2.3</b> Main Types of Data: Points, Lines, Polygons</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#base-maps"><i class="fa fa-check"></i><b>8.3</b> Base maps</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#getting-some-libraries"><i class="fa fa-check"></i><b>8.3.1</b> Getting some libraries</a></li>
<li class="chapter" data-level="8.3.2" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#creating-the-base-map"><i class="fa fa-check"></i><b>8.3.2</b> Creating the Base Map</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#other-base-maps-ggmap"><i class="fa fa-check"></i><b>8.4</b> Other base maps: <code>ggmap</code></a></li>
<li class="chapter" data-level="8.5" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#artistic-maps"><i class="fa fa-check"></i><b>8.5</b> Artistic Maps</a></li>
<li class="chapter" data-level="8.6" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#HW08"><i class="fa fa-check"></i><b>8.6</b> Homework</a></li>
<li class="chapter" data-level="8.7" data-path="l06-data-ii.html"><a href="l06-data-ii.html#additional-materials"><i class="fa fa-check"></i><b>8.7</b> Additional Materials</a></li>
<li class="chapter" data-level="8.8" data-path="l08-gis-ii.html"><a href="l08-gis-ii.html#SH08"><i class="fa fa-check"></i><b>8.8</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html"><i class="fa fa-check"></i><b>9</b> L09: GIS III</a>
<ul>
<li class="chapter" data-level="9.1" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#mapping-categorical-and-continuous-data"><i class="fa fa-check"></i><b>9.1</b> Mapping Categorical and Continuous Data</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#TAG09"><i class="fa fa-check"></i><b>9.1.1</b> Goals</a></li>
<li class="chapter" data-level="9.1.2" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#SOFT09"><i class="fa fa-check"></i><b>9.1.2</b> Software</a></li>
<li class="chapter" data-level="9.1.3" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#data"><i class="fa fa-check"></i><b>9.1.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#maps"><i class="fa fa-check"></i><b>9.2</b> Maps</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#choropleth-population-of-vienna-over-time"><i class="fa fa-check"></i><b>9.2.1</b> Choropleth: Population of Vienna over time</a></li>
<li class="chapter" data-level="9.2.2" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#dots-population-growth---us-population-by-city"><i class="fa fa-check"></i><b>9.2.2</b> Dots: Population Growth - US population (by city)</a></li>
<li class="chapter" data-level="9.2.3" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#graphs-population-growth-by-state"><i class="fa fa-check"></i><b>9.2.3</b> Graphs: Population Growth by State</a></li>
<li class="chapter" data-level="9.2.4" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#many-maps-population-by-city-growth-of-the-us"><i class="fa fa-check"></i><b>9.2.4</b> Many Maps: Population by city — growth of the US</a></li>
<li class="chapter" data-level="9.2.5" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#animated-maps-population-by-city-growth-of-the-us"><i class="fa fa-check"></i><b>9.2.5</b> Animated Maps: Population by city — growth of the US</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#HW09"><i class="fa fa-check"></i><b>9.3</b> Homework</a></li>
<li class="chapter" data-level="9.4" data-path="l09-gis-iii.html"><a href="l09-gis-iii.html#SH09"><i class="fa fa-check"></i><b>9.4</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html"><i class="fa fa-check"></i><b>10</b> L10: GIS IV</a>
<ul>
<li class="chapter" data-level="10.1" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#mapping-networks"><i class="fa fa-check"></i><b>10.1</b> Mapping Networks</a></li>
<li class="chapter" data-level="10.2" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#TAG10"><i class="fa fa-check"></i><b>10.2</b> Goals</a></li>
<li class="chapter" data-level="10.3" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#SOFT10"><i class="fa fa-check"></i><b>10.3</b> Software</a></li>
<li class="chapter" data-level="10.4" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#networks"><i class="fa fa-check"></i><b>10.4</b> Networks</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#basic-concepts"><i class="fa fa-check"></i><b>10.4.1</b> Basic Concepts</a></li>
<li class="chapter" data-level="10.4.2" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#data-for-networks-nodes-and-edges"><i class="fa fa-check"></i><b>10.4.2</b> Data for Networks: Nodes and Edges</a></li>
<li class="chapter" data-level="10.4.3" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#modeling-a-network"><i class="fa fa-check"></i><b>10.4.3</b> Modeling a Network</a></li>
<li class="chapter" data-level="10.4.4" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#most-common-analytical-steps-some-recipes"><i class="fa fa-check"></i><b>10.4.4</b> Most common analytical steps: some recipes</a></li>
<li class="chapter" data-level="10.4.5" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#the-network"><i class="fa fa-check"></i><b>10.4.5</b> The Network</a></li>
<li class="chapter" data-level="10.4.6" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#measures-of-centrality"><i class="fa fa-check"></i><b>10.4.6</b> Measures of centrality</a></li>
<li class="chapter" data-level="10.4.7" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#the-shortest-path"><i class="fa fa-check"></i><b>10.4.7</b> The Shortest Path</a></li>
<li class="chapter" data-level="10.4.8" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#clusters-andor-communities"><i class="fa fa-check"></i><b>10.4.8</b> Clusters and/or Communities</a></li>
<li class="chapter" data-level="10.4.9" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#centrality-measures-degree-and-betweenness"><i class="fa fa-check"></i><b>10.4.9</b> Centrality measures: Degree and Betweenness</a></li>
<li class="chapter" data-level="10.4.10" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#sparsifying-a-network"><i class="fa fa-check"></i><b>10.4.10</b> Sparsifying a Network</a></li>
<li class="chapter" data-level="10.4.11" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#other-networks-on-maps"><i class="fa fa-check"></i><b>10.4.11</b> Other networks on maps</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#wien-network"><i class="fa fa-check"></i><b>10.5</b> Wien Network</a></li>
<li class="chapter" data-level="10.6" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#AM10"><i class="fa fa-check"></i><b>10.6</b> Additional Materials on Networks in R</a></li>
<li class="chapter" data-level="10.7" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#HW10"><i class="fa fa-check"></i><b>10.7</b> Homework</a></li>
<li class="chapter" data-level="10.8" data-path="l10-gis-iv.html"><a href="l10-gis-iv.html#SH10"><i class="fa fa-check"></i><b>10.8</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="l11-gis-v.html"><a href="l11-gis-v.html"><i class="fa fa-check"></i><b>11</b> L11: GIS V</a>
<ul>
<li class="chapter" data-level="11.1" data-path="l11-gis-v.html"><a href="l11-gis-v.html#interactive-maps-with-r"><i class="fa fa-check"></i><b>11.1</b> Interactive Maps with R</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="l11-gis-v.html"><a href="l11-gis-v.html#TAG11"><i class="fa fa-check"></i><b>11.1.1</b> Goals</a></li>
<li class="chapter" data-level="11.1.2" data-path="l11-gis-v.html"><a href="l11-gis-v.html#SOFT11"><i class="fa fa-check"></i><b>11.1.2</b> Software</a></li>
<li class="chapter" data-level="11.1.3" data-path="l11-gis-v.html"><a href="l11-gis-v.html#AM11"><i class="fa fa-check"></i><b>11.1.3</b> Additional Materials</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="l11-gis-v.html"><a href="l11-gis-v.html#HW11"><i class="fa fa-check"></i><b>11.2</b> Homework</a></li>
<li class="chapter" data-level="11.3" data-path="l11-gis-v.html"><a href="l11-gis-v.html#SH11"><i class="fa fa-check"></i><b>11.3</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html"><i class="fa fa-check"></i><b>12</b> L12: Pojects I</a>
<ul>
<li class="chapter" data-level="12.1" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html#preparing-data"><i class="fa fa-check"></i><b>12.1</b> Preparing Data</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html#TAG12"><i class="fa fa-check"></i><b>12.1.1</b> Goals</a></li>
<li class="chapter" data-level="12.1.2" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html#SOFT12"><i class="fa fa-check"></i><b>12.1.2</b> Software</a></li>
<li class="chapter" data-level="12.1.3" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html#AM12"><i class="fa fa-check"></i><b>12.1.3</b> Additional Materials</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html#HW12"><i class="fa fa-check"></i><b>12.2</b> Homework</a></li>
<li class="chapter" data-level="12.3" data-path="l12-pojects-i.html"><a href="l12-pojects-i.html#SH12"><i class="fa fa-check"></i><b>12.3</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html"><i class="fa fa-check"></i><b>13</b> L13: Pojects II</a>
<ul>
<li class="chapter" data-level="13.1" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html#choosing-suitable-methods"><i class="fa fa-check"></i><b>13.1</b> Choosing Suitable Methods</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html#TAG13"><i class="fa fa-check"></i><b>13.1.1</b> Goals</a></li>
<li class="chapter" data-level="13.1.2" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html#SOFT13"><i class="fa fa-check"></i><b>13.1.2</b> Software</a></li>
<li class="chapter" data-level="13.1.3" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html#AM13"><i class="fa fa-check"></i><b>13.1.3</b> Additional Materials</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html#HW13"><i class="fa fa-check"></i><b>13.2</b> Homework</a></li>
<li class="chapter" data-level="13.3" data-path="l13-pojects-ii.html"><a href="l13-pojects-ii.html#SH13"><i class="fa fa-check"></i><b>13.3</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html"><i class="fa fa-check"></i><b>14</b> L14: Pojects III</a>
<ul>
<li class="chapter" data-level="14.1" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html#interpreting-results"><i class="fa fa-check"></i><b>14.1</b> Interpreting Results</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html#TAG14"><i class="fa fa-check"></i><b>14.1.1</b> Goals</a></li>
<li class="chapter" data-level="14.1.2" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html#SOFT14"><i class="fa fa-check"></i><b>14.1.2</b> Software</a></li>
<li class="chapter" data-level="14.1.3" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html#AM14"><i class="fa fa-check"></i><b>14.1.3</b> Additional Materials</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html#HW14"><i class="fa fa-check"></i><b>14.2</b> Homework</a></li>
<li class="chapter" data-level="14.3" data-path="l14-pojects-iii.html"><a href="l14-pojects-iii.html#SH14"><i class="fa fa-check"></i><b>14.3</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html"><i class="fa fa-check"></i><b>15</b> L15: Final Presentations</a>
<ul>
<li class="chapter" data-level="15.1" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html#presenting-your-work"><i class="fa fa-check"></i><b>15.1</b> Presenting Your Work</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html#TAG15"><i class="fa fa-check"></i><b>15.1.1</b> Goals</a></li>
<li class="chapter" data-level="15.1.2" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html#SOFT15"><i class="fa fa-check"></i><b>15.1.2</b> Software</a></li>
<li class="chapter" data-level="15.1.3" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html#AM15"><i class="fa fa-check"></i><b>15.1.3</b> Additional Materials</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html#HW15"><i class="fa fa-check"></i><b>15.2</b> Homework</a></li>
<li class="chapter" data-level="15.3" data-path="l15-final-presentations.html"><a href="l15-final-presentations.html#SH15"><i class="fa fa-check"></i><b>15.3</b> Submitting homework</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="misc-i-reading-assignments.html"><a href="misc-i-reading-assignments.html"><i class="fa fa-check"></i>MISC I: Reading Assignments</a>
<ul>
<li class="chapter" data-level="" data-path="misc-i-reading-assignments.html"><a href="misc-i-reading-assignments.html#how-to-complete-the-reading-reporting-assignments"><i class="fa fa-check"></i>How to complete the Reading-Reporting Assignments</a></li>
<li class="chapter" data-level="" data-path="misc-i-reading-assignments.html"><a href="misc-i-reading-assignments.html#preparing-and-submitting-your-reports"><i class="fa fa-check"></i>Preparing and Submitting Your Reports</a></li>
<li class="chapter" data-level="" data-path="misc-i-reading-assignments.html"><a href="misc-i-reading-assignments.html#suggested-monographs"><i class="fa fa-check"></i>Suggested Monographs</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i>Syllabus</a>
<ul>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#course-details"><i class="fa fa-check"></i>Course Details</a>
<ul>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#aims-contents-and-method-of-the-course"><i class="fa fa-check"></i>Aims, contents and method of the course</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#assessment-and-permitted-materials"><i class="fa fa-check"></i>Assessment and permitted materials</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#minimum-requirements-and-assessment-criteria"><i class="fa fa-check"></i>Minimum requirements and assessment criteria</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#course-evaluation"><i class="fa fa-check"></i>Course Evaluation</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#class-participation"><i class="fa fa-check"></i>Class Participation</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#homework-assignments"><i class="fa fa-check"></i>Homework Assignments</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#final-project"><i class="fa fa-check"></i>Final Project</a></li>
<li><a href="syllabus.html#practice-worksheets-r-notebooks">Practice worksheets (<code>R</code> Notebooks)</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#study-materials"><i class="fa fa-check"></i>Study materials</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#software-tools-technologies"><i class="fa fa-check"></i>Software, Tools, &amp; Technologies</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#lesson-topics"><i class="fa fa-check"></i>Lesson Topics</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#additional"><i class="fa fa-check"></i>Additional</a>
<ul>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#datasets"><i class="fa fa-check"></i>Datasets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">070184 UE Methodological course - Digital Humanities Skills: Intro to GIS (2021S), <code>R Edition</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="l10-gis-iv" class="section level1" number="10">
<h1><span class="header-section-number">10</span> L10: GIS IV</h1>
<div id="mapping-networks" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Mapping Networks</h2>
<p><em>Coming soon</em></p>
</div>
<div id="TAG10" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Goals</h2>
<ul>
<li>Basic understanding of networks</li>
<li>Data for networks: nodes and edges</li>
<li>Modeling networks</li>
<li>Most common approaches</li>
</ul>
</div>
<div id="SOFT10" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Software</h2>
<ul>
<li>R, RStudio
<ul>
<li><code>igraph</code> and a few other new libraries
<ul>
<li><strong>NB:</strong> <code>igraph</code> is the main SNA library. There are other packages we can use to visualize graphs (<code>ggraph</code>, for example), but most calculations and the overall analysis is still to be performed with <code>igraph</code>. You can get an overview of its contents with <code>library(help="igraph")</code>. More information: <a href="https://igraph.org/r/" class="uri">https://igraph.org/r/</a>; full documentation: <a href="https://igraph.org/r/doc/igraph.pdf" class="uri">https://igraph.org/r/doc/igraph.pdf</a></li>
</ul></li>
</ul></li>
<li>Data:
<ul>
<li>Our practice datasets will include two data sets on Islamic history: 1) the route network of the islamic world around 9-10th centuries (<a href="https://althurayya.github.io/" class="uri">https://althurayya.github.io/</a>); and bio-geographical data collected from 30,000 medieval biographies (Source: “The History of Islam” (<em>Taʾrīḫ al-islām</em>) of al-Ḏahabī (748/1348 CE)): <a href="https://maximromanov.github.io/rgis_univie2021/data_temp/althurayya.zip">Islamic_World_Data.zip</a></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="l10-gis-iv.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># General ones </span></span>
<span id="cb93-2"><a href="l10-gis-iv.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb93-3"><a href="l10-gis-iv.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb93-4"><a href="l10-gis-iv.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb93-5"><a href="l10-gis-iv.html#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb93-6"><a href="l10-gis-iv.html#cb93-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-7"><a href="l10-gis-iv.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="co"># SNA Specific</span></span>
<span id="cb93-8"><a href="l10-gis-iv.html#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb93-9"><a href="l10-gis-iv.html#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb93-10"><a href="l10-gis-iv.html#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb93-11"><a href="l10-gis-iv.html#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggalt)</span>
<span id="cb93-12"><a href="l10-gis-iv.html#cb93-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-13"><a href="l10-gis-iv.html#cb93-13" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping</span></span>
<span id="cb93-14"><a href="l10-gis-iv.html#cb93-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb93-15"><a href="l10-gis-iv.html#cb93-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb93-16"><a href="l10-gis-iv.html#cb93-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid) <span class="co"># grid library cuts out the plot from the graph</span></span></code></pre></div>
</div>
<div id="networks" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Networks</h2>
<div id="basic-concepts" class="section level3" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Basic Concepts</h3>
<ul>
<li>Example networks:
<ul>
<li>make a simple network of Vienna districts</li>
<li>explain how networks could work on hypothetical people living in different Viennese districts
<ul>
<li>person, district, dates (1800-2000), political views (Party 1, Party 2, Party 1)</li>
</ul></li>
<li>need some very small network, through which I can explain things.</li>
<li>Data on Vienna: <a href="https://www.geschichtewiki.wien.gv.at/Personen_Zeitleiste" class="uri">https://www.geschichtewiki.wien.gv.at/Personen_Zeitleiste</a> ; <a href="http://www.dasrotewien.at/" class="uri">http://www.dasrotewien.at/</a></li>
</ul></li>
<li>Basics of networks:
<ul>
<li>nodes and edges</li>
<li>the roles of nodes and edges</li>
<li>Main measures:
<ul>
<li>centrality</li>
<li>betweenness</li>
<li>clusters and cliques</li>
</ul></li>
<li>A note on: unimodal (only one types of nodes), bimodal, and multimodal networks
<ul>
<li>gist of it: one should always find ways to convert data into unimodal networks, as this is the type of networks that most algorithms are designed to work with;
<ul>
<li>bimodal network can be converted into unimodal one by converting the second type of nodes into edges and their values.
<ul>
<li>bimodal network: nodes are individuals and cities, edges — connections of individuals to cities; connections of cities to cities; connections of individuals to individuals (potentially)</li>
<li>unimodal: nodes are individuals; edges are shared cities individuals are connected with/to. Thus, in this case, connections between two individuals become a shared city they are connected to; the weight of this connection may be based on a number of shared cities. In other words, the connection between two individuals that share ten same cities will be stronger than between individuals that share only one; and there will be no connection between individuals who share no common cities.</li>
<li>unimodal network: one type of nodes; one type of connections; that said, the weight of connections may be aggregated from multiple parameters. For example, we have three individuals who share the city of Vienna as their connection; however, person 1 and person 2 also share something else — a district; the period of their lives overlap, etc., while person 1 and person 3 lived in different districts and their lives did not overlap chronologically. Thus, the weight of the edge between person 1 and 2 will be larger, than between 1 and 3 and two and 3. Yet, if there is also person 4, who has no connection to Vienna, his/her connection to P1, P2, and P3 will be nonexistent, unless we consider other parameters for the edges (shared lifetime, for example; or, larger geographical entities, etc.)</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="data-for-networks-nodes-and-edges" class="section level3" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> Data for Networks: Nodes and Edges</h3>
<ul>
<li>Nodes</li>
<li>Edges</li>
</ul>
</div>
<div id="modeling-a-network" class="section level3" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> Modeling a Network</h3>
<ul>
<li>…</li>
</ul>
</div>
<div id="most-common-analytical-steps-some-recipes" class="section level3" number="10.4.4">
<h3><span class="header-section-number">10.4.4</span> Most common analytical steps: some recipes</h3>
<div id="basemap" class="section level4" number="10.4.4.1">
<h4><span class="header-section-number">10.4.4.1</span> Basemap</h4>
<p>Download this file with extra data layers: <a href="./data_temp/map_objects.zip">map_objects.zip</a>. Unzip it and make sure to change the path in the code below so that you can load the data.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="l10-gis-iv.html#cb94-1" aria-hidden="true" tabindex="-1"></a>RDSfolder<span class="ot">=</span><span class="st">&quot;./data_temp/map_objects/&quot;</span></span>
<span id="cb94-2"><a href="l10-gis-iv.html#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="l10-gis-iv.html#cb94-3" aria-hidden="true" tabindex="-1"></a>rivers_df <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">paste0</span>(RDSfolder,<span class="st">&quot;rivers_df.rds&quot;</span>))</span>
<span id="cb94-4"><a href="l10-gis-iv.html#cb94-4" aria-hidden="true" tabindex="-1"></a>aral_sea_df <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">paste0</span>(RDSfolder,<span class="st">&quot;aral_sea_df.rds&quot;</span>))</span>
<span id="cb94-5"><a href="l10-gis-iv.html#cb94-5" aria-hidden="true" tabindex="-1"></a>routes_df <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">paste0</span>(RDSfolder,<span class="st">&quot;routes_df.rds&quot;</span>))</span></code></pre></div>
<p>Now, le’t create a base layer map, as we did before:</p>
<p><strong>NB:</strong> to install <code>rnaturalearthhires</code>, you may need to run: <code>remotes::install_github("ropensci/rnaturalearthhires")</code></p>
<p>Base layer for the medieval Islamic world:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="l10-gis-iv.html#cb95-1" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale=</span><span class="st">&quot;medium&quot;</span>, <span class="at">returnclass=</span><span class="st">&quot;sf&quot;</span>)</span>
<span id="cb95-2"><a href="l10-gis-iv.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="l10-gis-iv.html#cb95-3" aria-hidden="true" tabindex="-1"></a>colWater<span class="ot">=</span> <span class="st">&quot;lightsteelblue2&quot;</span></span>
<span id="cb95-4"><a href="l10-gis-iv.html#cb95-4" aria-hidden="true" tabindex="-1"></a>colLand <span class="ot">=</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb95-5"><a href="l10-gis-iv.html#cb95-5" aria-hidden="true" tabindex="-1"></a>colRout <span class="ot">=</span> <span class="st">&quot;grey&quot;</span></span>
<span id="cb95-6"><a href="l10-gis-iv.html#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="l10-gis-iv.html#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co">#xlimVal=c(-12,80); ylimVal=c(10,50)</span></span>
<span id="cb95-8"><a href="l10-gis-iv.html#cb95-8" aria-hidden="true" tabindex="-1"></a>IslamicWorldBaseBare <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>world) <span class="sc">+</span></span>
<span id="cb95-9"><a href="l10-gis-iv.html#cb95-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">fill=</span>colLand, <span class="at">color=</span>colLand) <span class="sc">+</span></span>
<span id="cb95-10"><a href="l10-gis-iv.html#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rivers, aral sea, and routes</span></span>
<span id="cb95-11"><a href="l10-gis-iv.html#cb95-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>routes_df, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>id), <span class="at">color=</span>colRout, <span class="at">size=</span>.<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb95-12"><a href="l10-gis-iv.html#cb95-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>rivers_df, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>group), <span class="at">color=</span>colWater, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span>.<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb95-13"><a href="l10-gis-iv.html#cb95-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data=</span>aral_sea_df, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>group), <span class="at">color=</span>colWater, <span class="at">fill=</span>colWater, <span class="at">size=</span>.<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb95-14"><a href="l10-gis-iv.html#cb95-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># map limits and theme</span></span>
<span id="cb95-15"><a href="l10-gis-iv.html#cb95-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#coord_sf(xlim=xlimVal, ylim=ylimVal, expand=FALSE) +</span></span>
<span id="cb95-16"><a href="l10-gis-iv.html#cb95-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major=</span><span class="fu">element_line</span>(<span class="at">color=</span>colWater, <span class="at">linetype=</span><span class="st">&quot;dotted&quot;</span>, <span class="at">size=</span><span class="fl">0.5</span>),</span>
<span id="cb95-17"><a href="l10-gis-iv.html#cb95-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background=</span><span class="fu">element_rect</span>(<span class="at">fill=</span>colWater),<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, <span class="at">panel.border=</span><span class="fu">element_blank</span>())</span>
<span id="cb95-18"><a href="l10-gis-iv.html#cb95-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-19"><a href="l10-gis-iv.html#cb95-19" aria-hidden="true" tabindex="-1"></a>IslamicWorldBaseBare</span></code></pre></div>
<p><img src="RGIS2021S_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Routes are plotted in grey; rivers — in blue. We will not modify routes in any way with additional data for visualization. Let’s now load network data, which will include the following:</p>
<ul>
<li>nodes will be settlements;</li>
<li>edges will be “routes” that we see on the map, but we will use only values, not the “drawings” of these routes for our analysis. More specifically, our edges data will include connections between places. Here we will need some additional steps.</li>
</ul>
<p>Let’s load edges first, as they are rather simple (download: <a href="./data_temp/althurayya.zip">althurayya.zip</a>). There is a lot of data that we will not need, so I will filter it out,</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="l10-gis-iv.html#cb96-1" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/routes.csv&quot;</span>, </span>
<span id="cb96-2"><a href="l10-gis-iv.html#cb96-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb96-3"><a href="l10-gis-iv.html#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="l10-gis-iv.html#cb96-4" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> edges <span class="sc">%&gt;%</span></span>
<span id="cb96-5"><a href="l10-gis-iv.html#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> meter) <span class="sc">%&gt;%</span></span>
<span id="cb96-6"><a href="l10-gis-iv.html#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sToponym, eToponym, weight, meter, terrain, safety)</span>
<span id="cb96-7"><a href="l10-gis-iv.html#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="l10-gis-iv.html#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(edges)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   sToponym           eToponym            weight meter terrain  safety   
##   &lt;chr&gt;              &lt;chr&gt;                &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    
## 1 RIHA_354E318N_S    NABULUS_352E322N_S   48742 48742 mountain safe     
## 2 ZARQA_360E320N_S   AMMAN_359E319N_S     22288 22288 river    dangerous
## 3 ZARQA_360E320N_S   ADHRIAT_360E326N_S   67802 67802 desert   normal   
## 4 ADHRIAT_360E326N_S ZARQA_360E320N_S     61334 61334 mountain dangerous
## 5 NAWA_360E328N_S    ADHRIAT_360E326N_S   31554 31554 normal   safe     
## 6 JASIM_360E329N_S   AQABAFIQ_356E327N_S  41808 41808 mountain safe</code></pre>
<p>Here we have <code>sToponym</code>, <code>eToponym</code>, and <code>meter</code>, i.e. the distance from the start-place to the end-place. The “start” and the “end” do not really carry any meaning here as the network is undirected.</p>
<p>We will use the values from <code>meter</code> as <code>weight</code> for now. Below, we will discuss how these values may be modeled in order to make your network more nuanced.</p>
<!--
One modification is necessary here: we need to transform the length into weight. The general idea of weight is that stronger connections have larger values. With distances, it is the opposite --- stronger connections are between places that are closer to each other. So, the easiest way to generate usable weights will be to create another column where divide 1 by the length value --- this way shorter distances will be converted into larger values (and we can multiply the result by, say, 1000 --- so that the final values are easier to read).


```r
edges <- edges %>%
  mutate(weight = meter) %>%
  select(sToponym, eToponym, weight)

edges
```

```
## # A tibble: 2,053 x 3
##    sToponym                 eToponym            weight
##    <chr>                    <chr>                <dbl>
##  1 RIHA_354E318N_S          NABULUS_352E322N_S   48742
##  2 ZARQA_360E320N_S         AMMAN_359E319N_S     22288
##  3 ZARQA_360E320N_S         ADHRIAT_360E326N_S   67802
##  4 ADHRIAT_360E326N_S       ZARQA_360E320N_S     61334
##  5 NAWA_360E328N_S          ADHRIAT_360E326N_S   31554
##  6 JASIM_360E329N_S         AQABAFIQ_356E327N_S  41808
##  7 JABIYA_360E329N_S        NAWA_360E328N_S       5016
##  8 JASIM_360E329N_S         JABIYA_360E329N_S     6380
##  9 ROUTPOINT0121_362E333N_O ADHRIAT_360E326N_S   81803
## 10 ROUTPOINT0121_362E333N_O JASIM_360E329N_S     42594
## # … with 2,043 more rows
```

-->
<p>Now, the nodes:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="l10-gis-iv.html#cb98-1" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/settlements.csv&quot;</span>, </span>
<span id="cb98-2"><a href="l10-gis-iv.html#cb98-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb98-3"><a href="l10-gis-iv.html#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="l10-gis-iv.html#cb98-4" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> nodes <span class="sc">%&gt;%</span></span>
<span id="cb98-5"><a href="l10-gis-iv.html#cb98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col=</span>coordinates, <span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;l&quot;</span>, <span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>, <span class="st">&quot;r&quot;</span>), <span class="at">sep=</span><span class="st">&quot;([</span><span class="sc">\\</span><span class="st">[, </span><span class="sc">\\</span><span class="st">]]+)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb98-6"><a href="l10-gis-iv.html#cb98-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(settlement_id, names_eng_translit, region_URI, top_type, lon, lat) <span class="sc">%&gt;%</span></span>
<span id="cb98-7"><a href="l10-gis-iv.html#cb98-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lon =</span> <span class="fu">as.numeric</span>(lon), <span class="at">lat =</span> <span class="fu">as.numeric</span>(lat))</span>
<span id="cb98-8"><a href="l10-gis-iv.html#cb98-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-9"><a href="l10-gis-iv.html#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co"># remove nodes which are not in the network</span></span>
<span id="cb98-10"><a href="l10-gis-iv.html#cb98-10" aria-hidden="true" tabindex="-1"></a>nwNodes <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">c</span>(edges<span class="sc">$</span>sToponym, edges<span class="sc">$</span>eToponym))</span>
<span id="cb98-11"><a href="l10-gis-iv.html#cb98-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-12"><a href="l10-gis-iv.html#cb98-12" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> nodes <span class="sc">%&gt;%</span></span>
<span id="cb98-13"><a href="l10-gis-iv.html#cb98-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(settlement_id <span class="sc">%in%</span> nwNodes)</span>
<span id="cb98-14"><a href="l10-gis-iv.html#cb98-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-15"><a href="l10-gis-iv.html#cb98-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodes)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   settlement_id         names_eng_translit region_URI top_type      lon   lat
##   &lt;chr&gt;                 &lt;chr&gt;              &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;
## 1 QAHIRA_312E300N_S     al-Qāhiraŧ         Misr_RE    metropoles 31.2    30.0
## 2 WASHQA_003W421N_S     Wašqaŧ             Andalus_RE towns      -0.354  42.2
## 3 BALANSIYYA_004W394N_S Balansiyyaŧ        Andalus_RE towns      -0.415  39.4
## 4 SHAQR_004W391N_S      al-Šaqr            Andalus_RE villages   -0.437  39.2
## 5 QANT_004W383N_S       Qānt               Andalus_RE towns      -0.471  38.3
## 6 SHATIBA_005W389N_S    Šātibaŧ            Andalus_RE towns      -0.523  39.0</code></pre>
<p>Let’s quickly generate a map with our nodes — so that you have a general idea:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="l10-gis-iv.html#cb100-1" aria-hidden="true" tabindex="-1"></a>nodesTop <span class="ot">&lt;-</span> nodes <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="l10-gis-iv.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(top_type <span class="sc">==</span> <span class="st">&quot;metropoles&quot;</span>)</span>
<span id="cb100-3"><a href="l10-gis-iv.html#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="l10-gis-iv.html#cb100-4" aria-hidden="true" tabindex="-1"></a>annotData <span class="ot">&lt;-</span> nodesTop</span>
<span id="cb100-5"><a href="l10-gis-iv.html#cb100-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-6"><a href="l10-gis-iv.html#cb100-6" aria-hidden="true" tabindex="-1"></a>metropoles <span class="ot">&lt;-</span> IslamicWorldBaseBare <span class="sc">+</span> </span>
<span id="cb100-7"><a href="l10-gis-iv.html#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> nodes, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat, <span class="at">col=</span>region_URI), <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb100-8"><a href="l10-gis-iv.html#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb100-9"><a href="l10-gis-iv.html#cb100-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">label =</span> names_eng_translit, <span class="at">x=</span>lon, <span class="at">y=</span>lat)) <span class="sc">+</span> </span>
<span id="cb100-10"><a href="l10-gis-iv.html#cb100-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(nodes<span class="sc">$</span>lon)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(nodes<span class="sc">$</span>lon)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb100-11"><a href="l10-gis-iv.html#cb100-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(nodes<span class="sc">$</span>lat)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(nodes<span class="sc">$</span>lat)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb100-12"><a href="l10-gis-iv.html#cb100-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>)</span>
<span id="cb100-13"><a href="l10-gis-iv.html#cb100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-14"><a href="l10-gis-iv.html#cb100-14" aria-hidden="true" tabindex="-1"></a>metropoles</span></code></pre></div>
<p><img src="RGIS2021S_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p>The following lines of code will help you to save your maps without unnecessary information — cut out and keep only the map. There may still be white stripes on the sides, so you may have to need to play around with the width and height parameters.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="l10-gis-iv.html#cb101-1" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(metropoles))</span>
<span id="cb101-2"><a href="l10-gis-iv.html#cb101-2" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb101-3"><a href="l10-gis-iv.html#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="l10-gis-iv.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_metropoles.png&quot;</span>),</span>
<span id="cb101-5"><a href="l10-gis-iv.html#cb101-5" aria-hidden="true" tabindex="-1"></a>       <span class="co"># the following line focuses on the graph</span></span>
<span id="cb101-6"><a href="l10-gis-iv.html#cb101-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb101-7"><a href="l10-gis-iv.html#cb101-7" aria-hidden="true" tabindex="-1"></a>       <span class="co"># width and height should be experimentally adjusted to remove white space</span></span>
<span id="cb101-8"><a href="l10-gis-iv.html#cb101-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="fl">8.4</span>,<span class="at">height=</span><span class="fl">4.65</span>)</span></code></pre></div>
<p><img src="files/networks/IW_metropoles.png" /></p>
<p><strong>Note:</strong> Colors of dots on this map indicate different provinces of the early Islamic world. Considering that borders—in the modern sense—did not exist back then, this is one of the most efficient ways of displaying the extents of regions. White areas effectively indicate uninhabited lands—in most cases, deserts, mountains, or mountainous deserts.</p>
</div>
</div>
<div id="the-network" class="section level3" number="10.4.5">
<h3><span class="header-section-number">10.4.5</span> The Network</h3>
<p>Now, as we have both the nodes and the edges, we can start our analysis. There are a few things that make sense to begin with:</p>
<ul>
<li><p>look for the most important nodes in the network: i.e. those nodes, through which most other nodes are connected to each other (in practical terms that would mean that most people would travel through those places and, as a result, we may expect that these places would play an important role in cultural exchange); this analysis can be done in a variety of ways—we can use the network as is, or we can apply a variety of modifications that would help us to “encode” some additional historical information that might be missing from the network. By and large, this includes different centrality measures (degree, betweenness, eigenvector centrality, etc.);</p></li>
<li><p>look for most closely interconnected clusters of nodes, which may may help us to understand the historical confines of specific areas, such as provinces, states, conquered territories and the like;</p></li>
<li><p>look for the shortest paths within the network (i.e., how one would travel from one place to another);</p></li>
<li><p>and, if we have relevant data, we can “overplot” other networks on geographical maps (movements of people); in this case, however, the network will be different and we will simply use the map as its layout.</p></li>
</ul>
<p>We start by creating a network object in the following manner:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="l10-gis-iv.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb102-2"><a href="l10-gis-iv.html#cb102-2" aria-hidden="true" tabindex="-1"></a>iwNetwork <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d=</span>edges, <span class="at">vertices=</span>nodes, <span class="at">directed=</span><span class="cn">FALSE</span>)</span>
<span id="cb102-3"><a href="l10-gis-iv.html#cb102-3" aria-hidden="true" tabindex="-1"></a>iwNetwork</span></code></pre></div>
<pre><code>## IGRAPH d7d29a7 UNW- 1692 2053 -- 
## + attr: name (v/c), names_eng_translit (v/c), region_URI (v/c),
## | top_type (v/c), lon (v/n), lat (v/n), weight (e/n)
## + edges from d7d29a7 (vertex names):
##  [1] NABULUS_352E322N_S --RIHA_354E318N_S         
##  [2] AMMAN_359E319N_S   --ZARQA_360E320N_S        
##  [3] ZARQA_360E320N_S   --ADHRIAT_360E326N_S      
##  [4] ZARQA_360E320N_S   --ADHRIAT_360E326N_S      
##  [5] NAWA_360E328N_S    --ADHRIAT_360E326N_S      
##  [6] AQABAFIQ_356E327N_S--JASIM_360E329N_S        
##  [7] NAWA_360E328N_S    --JABIYA_360E329N_S       
## + ... omitted several edges</code></pre>
<p>The description of an <code>igraph</code> object starts with four letters (in our case: <code>UNW-</code>):</p>
<ul>
<li><code>D</code> or <code>U</code>, for a directed or undirected graph</li>
<li><code>N</code> for a named graph (where nodes have a name attribute)</li>
<li><code>W</code> for a weighted graph (where edges have a weight attribute)</li>
<li><code>B</code> for a bipartite (two-mode) graph (where nodes have a type attribute)</li>
</ul>
<p>In our case, it is <code>UNW-</code>, i.e.: undirected, named, weighted, and not bipartite.</p>
<p>The two numbers that follow (<code>110 444</code>) refer to the number of nodes and edges in the graph. The description also lists node &amp; edge attributes, for example:</p>
<ul>
<li><code>(g/c)</code> - graph-level character attribute</li>
<li><code>(v/c)</code> - vertex-level character attribute</li>
<li><code>(e/n)</code> - edge-level numeric attribute</li>
</ul>
<p><code>igraph</code> objects provide us with an easy access to nodes, edges, and their attributes with the following commands:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="l10-gis-iv.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">E</span>(iwNetwork), <span class="dv">20</span>)</span></code></pre></div>
<pre><code>## + 20/2053 edges from d7d29a7 (vertex names):
##  [1] NABULUS_352E322N_S   --RIHA_354E318N_S         
##  [2] AMMAN_359E319N_S     --ZARQA_360E320N_S        
##  [3] ZARQA_360E320N_S     --ADHRIAT_360E326N_S      
##  [4] ZARQA_360E320N_S     --ADHRIAT_360E326N_S      
##  [5] NAWA_360E328N_S      --ADHRIAT_360E326N_S      
##  [6] AQABAFIQ_356E327N_S  --JASIM_360E329N_S        
##  [7] NAWA_360E328N_S      --JABIYA_360E329N_S       
##  [8] JABIYA_360E329N_S    --JASIM_360E329N_S        
##  [9] ADHRIAT_360E326N_S   --ROUTPOINT0121_362E333N_O
## [10] JASIM_360E329N_S     --ROUTPOINT0121_362E333N_O
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="l10-gis-iv.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">V</span>(iwNetwork), <span class="dv">20</span>)</span></code></pre></div>
<pre><code>## + 20/1692 vertices, named, from d7d29a7:
##  [1] QAHIRA_312E300N_S      WASHQA_003W421N_S      BALANSIYYA_004W394N_S 
##  [4] SHAQR_004W391N_S       QANT_004W383N_S        SHATIBA_005W389N_S    
##  [7] SARAQUSA_009W416N_S    MURSIYA_011W379N_S     TUTILA_016W420N_S     
## [10] LURQA_017W376N_S       MADINASALIM_024W411N_S BAJJANA_024W369N_S    
## [13] MARIYYA_025W368N_S     WADIHIJARA_031W406N_S  WADIYASH_031W373N_S   
## [16] BAYYASA_034W379N_S     GHARNATA_035W372N_S    LIBIRA_036W372N_S     
## [19] QALARABAH_037W388N_S   JAYYAN_038W377N_S</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="l10-gis-iv.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">E</span>(iwNetwork)<span class="sc">$</span>weight, <span class="dv">20</span>)</span></code></pre></div>
<pre><code>##  [1]  48742  22288  67802  61334  31554  41808   5016   6380  81803  42594
## [11]  97452 188149  43254  84816  47117  19536  24577  78493  28113  65632</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="l10-gis-iv.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">V</span>(iwNetwork)<span class="sc">$</span>name, <span class="dv">20</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;QAHIRA_312E300N_S&quot;      &quot;WASHQA_003W421N_S&quot;      &quot;BALANSIYYA_004W394N_S&quot; 
##  [4] &quot;SHAQR_004W391N_S&quot;       &quot;QANT_004W383N_S&quot;        &quot;SHATIBA_005W389N_S&quot;    
##  [7] &quot;SARAQUSA_009W416N_S&quot;    &quot;MURSIYA_011W379N_S&quot;     &quot;TUTILA_016W420N_S&quot;     
## [10] &quot;LURQA_017W376N_S&quot;       &quot;MADINASALIM_024W411N_S&quot; &quot;BAJJANA_024W369N_S&quot;    
## [13] &quot;MARIYYA_025W368N_S&quot;     &quot;WADIHIJARA_031W406N_S&quot;  &quot;WADIYASH_031W373N_S&quot;   
## [16] &quot;BAYYASA_034W379N_S&quot;     &quot;GHARNATA_035W372N_S&quot;    &quot;LIBIRA_036W372N_S&quot;     
## [19] &quot;QALARABAH_037W388N_S&quot;   &quot;JAYYAN_038W377N_S&quot;</code></pre>
<p>Keep these commands in mind because they will help you to extract necessary information from graph objects that you create with <code>igraph</code> and reuse them elsewhere.</p>
</div>
<div id="measures-of-centrality" class="section level3" number="10.4.6">
<h3><span class="header-section-number">10.4.6</span> Measures of centrality</h3>
<p>Now we have our network object in the variable called <code>iwNetwork</code> and we can calculate several most common measures of centrality. They should tell us something about the structure of the network and the role of specific nodes. We will return to this in what follows…</p>
<!-- #### Degree -->
<!-- ```{r} -->
<!-- V(iwNetwork)$degree <- degree(iwNetwork, mode="all") -->
<!-- degree(iwNetwork, mode="all", loops=FALSE) %>% sort(decreasing=TRUE) %>% .[1:15] -->
<!-- hist(degree(iwNetwork, mode="all", loops=FALSE)) -->
<!-- ``` -->
<!-- Let's map this: -->
<!-- ```{r} -->
<!-- highDegreeNodes <- as_data_frame(iwNetwork, what="vertices") %>% -->
<!--   filter(degree >= 5) %>% -->
<!--   filter(top_type != "xroads") -->
<!-- annotData <- highDegreeNodes -->
<!-- currentMap <- IslamicWorldBaseBare +  -->
<!--   geom_point(data = nodes, aes(x=lon, y=lat), col="grey", alpha=0.5, size=0.25) + -->
<!--   geom_point(data = annotData, aes(x=lon, y=lat), col="red", size=1) + -->
<!--   geom_label_repel(data = annotData, aes(label = names_eng_translit, x=lon, y=lat), max.overlaps = 100) +  -->
<!--   coord_sf(xlim=c(min(nodes$lon)-1, max(nodes$lon)+1), -->
<!--            ylim=c(min(nodes$lat)-1, max(nodes$lat)+1), -->
<!--                  expand=FALSE) -->
<!-- gt <- ggplot_gtable(ggplot_build(currentMap)) -->
<!-- ge <- subset(gt$layout, name == "panel") -->
<!-- ggsave(file=paste0("./files/networks/IW_degree.png"), -->
<!--        # the following line focuses on the graph -->
<!--        plot=grid.draw(gt[ge$t:ge$b, ge$l:ge$r]), -->
<!--        # width and height should be experimentally adjusted to remove white space -->
<!--        dpi=300,width=8.4,height=4.65) -->
<!-- ``` -->
<!-- ![](./files/networks/IW_degree.png) -->
<!-- Interpretation: ... -->
<!-- #### Eigenvector centrality -->
<!-- ```{r} -->
<!-- V(iwNetwork)$eigenvectorNA <- eigen_centrality(iwNetwork, directed=FALSE, weights=NA)$vector -->
<!-- eigen_centrality(iwNetwork, directed=FALSE, weights=NA)$vector %>% sort(decreasing=TRUE) %>% .[1:15] -->
<!-- hist(eigen_centrality(iwNetwork, directed=FALSE, weights=NA)$vector) -->
<!-- ``` -->
<!-- Let's map this: -->
<!-- ```{r} -->
<!-- eigen <- as_data_frame(iwNetwork, what="vertices") %>% -->
<!--   slice_max(eigenvectorNA, n = 15) %>% -->
<!--   filter(top_type != "xroads") -->
<!-- annotData <- eigen -->
<!-- currentMap <- IslamicWorldBaseBare +  -->
<!--   geom_point(data = nodes, aes(x=lon, y=lat), col="grey", alpha=0.5, size=0.25) + -->
<!--   geom_point(data = annotData, aes(x=lon, y=lat), col="red", size=1) + -->
<!--   geom_label_repel(data = annotData, aes(label = names_eng_translit, x=lon, y=lat), max.overlaps = 100) +  -->
<!--   coord_sf(xlim=c(min(nodes$lon)-1, max(nodes$lon)+1), -->
<!--            ylim=c(min(nodes$lat)-1, max(nodes$lat)+1), -->
<!--                  expand=FALSE) -->
<!-- gt <- ggplot_gtable(ggplot_build(currentMap)) -->
<!-- ge <- subset(gt$layout, name == "panel") -->
<!-- ggsave(file=paste0("./files/networks/IW_eigenNA.png"), -->
<!--        # the following line focuses on the graph -->
<!--        plot=grid.draw(gt[ge$t:ge$b, ge$l:ge$r]), -->
<!--        # width and height should be experimentally adjusted to remove white space -->
<!--        dpi=300,width=8.4,height=4.65) -->
<!-- ``` -->
<!-- ![](./files/networks/IW_eigenNA.png) -->
<!-- Interpretation: -->
<!-- ```{r} -->
<!-- V(iwNetwork)$eigenvector <- eigen_centrality(iwNetwork)$vector -->
<!-- eigen_centrality(iwNetwork, directed=FALSE)$vector %>% sort(decreasing=TRUE) %>% .[1:15] -->
<!-- hist(eigen_centrality(iwNetwork, directed=FALSE)$vector) -->
<!-- ``` -->
<!-- Let's map this: -->
<!-- ```{r} -->
<!-- eigen <- as_data_frame(iwNetwork, what="vertices") %>% -->
<!--   slice_max(eigenvector, n = 15) %>% -->
<!--   filter(top_type != "xroads") -->
<!-- annotData <- eigen -->
<!-- currentMap <- IslamicWorldBaseBare +  -->
<!--   geom_point(data = nodes, aes(x=lon, y=lat), col="grey", alpha=0.5, size=0.25) + -->
<!--   geom_point(data = annotData, aes(x=lon, y=lat), col="red", size=1) + -->
<!--   geom_label_repel(data = annotData, aes(label = names_eng_translit, x=lon, y=lat), max.overlaps = 100) +  -->
<!--   coord_sf(xlim=c(min(nodes$lon)-1, max(nodes$lon)+1), -->
<!--            ylim=c(min(nodes$lat)-1, max(nodes$lat)+1), -->
<!--                  expand=FALSE) -->
<!-- gt <- ggplot_gtable(ggplot_build(currentMap)) -->
<!-- ge <- subset(gt$layout, name == "panel") -->
<!-- ggsave(file=paste0("./files/networks/IW_eigen.png"), -->
<!--        # the following line focuses on the graph -->
<!--        plot=grid.draw(gt[ge$t:ge$b, ge$l:ge$r]), -->
<!--        # width and height should be experimentally adjusted to remove white space -->
<!--        dpi=300,width=8.4,height=4.65) -->
<!-- ``` -->
<!-- ![](./files/networks/IW_eigen.png) -->
<!-- Interpretation: -->
<!-- #### Betweenness -->
<!-- ```{r} -->
<!-- V(iwNetwork)$betweennessNA <- betweenness(iwNetwork, directed=FALSE, weights=NA) -->
<!-- betweenness(iwNetwork, directed=FALSE, weights=NA) %>% sort(decreasing=TRUE) %>% .[1:15] -->
<!-- hist(betweenness(iwNetwork, directed=FALSE, weights=NA)) -->
<!-- ``` -->
<!-- Let's map this: -->
<!-- ```{r} -->
<!-- btwNA <- as_data_frame(iwNetwork, what="vertices") %>% -->
<!--   slice_max(betweennessNA, n = 15) %>% -->
<!--   filter(top_type != "xroads") -->
<!-- annotData <- btwNA -->
<!-- currentMap <- IslamicWorldBaseBare +  -->
<!--   geom_point(data = nodes, aes(x=lon, y=lat), col="grey", alpha=0.5, size=0.25) + -->
<!--   geom_point(data = annotData, aes(x=lon, y=lat), col="red", size=1) + -->
<!--   geom_label_repel(data = annotData, aes(label = names_eng_translit, x=lon, y=lat), max.overlaps = 100) +  -->
<!--   coord_sf(xlim=c(min(nodes$lon)-1, max(nodes$lon)+1), -->
<!--            ylim=c(min(nodes$lat)-1, max(nodes$lat)+1), -->
<!--                  expand=FALSE) -->
<!-- gt <- ggplot_gtable(ggplot_build(currentMap)) -->
<!-- ge <- subset(gt$layout, name == "panel") -->
<!-- ggsave(file=paste0("./files/networks/IW_btwNA.png"), -->
<!--        # the following line focuses on the graph -->
<!--        plot=grid.draw(gt[ge$t:ge$b, ge$l:ge$r]), -->
<!--        # width and height should be experimentally adjusted to remove white space -->
<!--        dpi=300,width=8.4,height=4.65) -->
<!-- ``` -->
<!-- ![](./files/networks/IW_btwNA.png) -->
<!-- Interpretation: -->
<!-- ```{r} -->
<!-- V(iwNetwork)$betweenness <- betweenness(iwNetwork, directed=FALSE) -->
<!-- betweenness(iwNetwork, directed=FALSE) %>% sort(decreasing=TRUE) %>% .[1:15] -->
<!-- hist(betweenness(iwNetwork, directed=FALSE)) -->
<!-- ``` -->
<!-- Let's map this: -->
<!-- ```{r} -->
<!-- btw <- as_data_frame(iwNetwork, what="vertices") %>% -->
<!--   slice_max(betweenness, n = 15) %>% -->
<!--   filter(top_type != "xroads") -->
<!-- annotData <- btw -->
<!-- currentMap <- IslamicWorldBaseBare +  -->
<!--   geom_point(data = nodes, aes(x=lon, y=lat), col="grey", alpha=0.5, size=0.25) + -->
<!--   geom_point(data = annotData, aes(x=lon, y=lat), col="red", size=1) + -->
<!--   geom_label_repel(data = annotData, aes(label = names_eng_translit, x=lon, y=lat), max.overlaps = 100) +  -->
<!--   coord_sf(xlim=c(min(nodes$lon)-1, max(nodes$lon)+1), -->
<!--            ylim=c(min(nodes$lat)-1, max(nodes$lat)+1), -->
<!--                  expand=FALSE) -->
<!-- gt <- ggplot_gtable(ggplot_build(currentMap)) -->
<!-- ge <- subset(gt$layout, name == "panel") -->
<!-- ggsave(file=paste0("./files/networks/IW_btw.png"), -->
<!--        # the following line focuses on the graph -->
<!--        plot=grid.draw(gt[ge$t:ge$b, ge$l:ge$r]), -->
<!--        # width and height should be experimentally adjusted to remove white space -->
<!--        dpi=300,width=8.4,height=4.65) -->
<!-- ``` -->
<!-- ![](./files/networks/IW_btw.png) -->
<!-- Interpretation: -->
</div>
<div id="the-shortest-path" class="section level3" number="10.4.7">
<h3><span class="header-section-number">10.4.7</span> The Shortest Path</h3>
<p>You may be interested in finding the shortest path within a specific network. We can do that with the same <code>igraph</code> library and put it on the map. Let’s say, we want to find the shortest path from Baghdad (Baġdād) to Damascus (Dimašq). The following code will give us a vector (sequence) of nodes from one point to another. The second line of code extracts IDs of places from a list of values (we will need a simple vector).</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="l10-gis-iv.html#cb112-1" aria-hidden="true" tabindex="-1"></a>baghdad_to_damascus <span class="ot">&lt;-</span> <span class="fu">shortest_paths</span>(iwNetwork, <span class="at">from =</span> <span class="st">&quot;BAGHDAD_443E333N_S&quot;</span>, <span class="at">to =</span> <span class="st">&quot;DIMASHQ_363E335N_S&quot;</span>, <span class="at">weights =</span> <span class="fu">E</span>(iwNetwork)<span class="sc">$</span>weight)<span class="sc">$</span>vpath</span>
<span id="cb112-2"><a href="l10-gis-iv.html#cb112-2" aria-hidden="true" tabindex="-1"></a>baghdad_to_damascus <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">unlist</span>(baghdad_to_damascus))</span></code></pre></div>
<p>The shortest path is found with the <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra algorithm</a>, which is currently the most standard way of calculating the shortest path within a network. Essentially, it finds the path between A and B, where the sum of edges (like distance in meters, for example) is the shortest. Therte are plenty of videos on YouTube with the detailed explanations of how it works (for example, <a href="https://www.youtube.com/watch?v=GazC3A4OQTE">this</a>). Please, take a look, understanding how it works may help you to find a way to use it in other contexts.</p>
<p>We can graph this in the following manner (for simplicity, the red line does not follow the actual routes, but draws a straight line between settlements along the path):</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="l10-gis-iv.html#cb113-1" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ID =</span> baghdad_to_damascus) <span class="sc">%&gt;%</span></span>
<span id="cb113-2"><a href="l10-gis-iv.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span> <span class="ot">=</span> <span class="st">&quot;settlement_id&quot;</span>))</span>
<span id="cb113-3"><a href="l10-gis-iv.html#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="l10-gis-iv.html#cb113-4" aria-hidden="true" tabindex="-1"></a>annotData <span class="ot">&lt;-</span> path</span>
<span id="cb113-5"><a href="l10-gis-iv.html#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="l10-gis-iv.html#cb113-6" aria-hidden="true" tabindex="-1"></a>IslamicWorldBaseBare <span class="sc">+</span> </span>
<span id="cb113-7"><a href="l10-gis-iv.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat), <span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span> </span>
<span id="cb113-8"><a href="l10-gis-iv.html#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb113-9"><a href="l10-gis-iv.html#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">label =</span> names_eng_translit, <span class="at">x=</span>lon, <span class="at">y=</span>lat)) <span class="sc">+</span> </span>
<span id="cb113-10"><a href="l10-gis-iv.html#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(annotData<span class="sc">$</span>lon)<span class="sc">-</span><span class="dv">5</span>, <span class="fu">max</span>(annotData<span class="sc">$</span>lon)<span class="sc">+</span><span class="dv">5</span>),</span>
<span id="cb113-11"><a href="l10-gis-iv.html#cb113-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(annotData<span class="sc">$</span>lat)<span class="sc">-</span><span class="dv">3</span>, <span class="fu">max</span>(annotData<span class="sc">$</span>lat)<span class="sc">+</span><span class="dv">3</span>),</span>
<span id="cb113-12"><a href="l10-gis-iv.html#cb113-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="RGIS2021S_files/figure-html/unnamed-chunk-74-1.png" width="672" /></p>
<p>Everything worked as planned, but we need to consider geography and history in order to generate a path that actually makes sense. If we look at the image below, the shortest path (these paths are modeled in <a href="https://althurayya.github.io/">althurayya.github.io</a>). The problem with the shortest path is that it is going through the desert, and while it is possible to take this path, this was the path that was avoided as very dangerous. The prefered path was to travel along the Euphrates or the Tigris rivers, and, preferably, along the path with more settlements along the way. On the map below the green path is closer to the prefered option (ideally, it should go through Samarra (Sāmarrāʾ), Mosul (al-Mawṣil), Ar Raqqah (al-Raqqaŧ), and, probably, Aleppo (Ḥalab)).</p>
<p><img src="files/networks/b_to_d2.png" /></p>
<p>This is where we can modify some parameters of our network in order to make it work more in line with our geographical and historical knowledge. The Dijkstra algorithm takes into account exclusively the lengths of route sections between the nodes in the network, but we can modify these lengths to make the Dijkstra algorithm work the way we want. This will be the easiest and the most flexible way to re-model our network — we can modify these lengths by introducing additional parameters (multipliers, or dividers). For example, if a node is a “capital” or a “town,” it will be preferable to travel through this node, rather than through a “village” or a “waystation.” Say, we have two equally plausible routes, one between a town and a waystation and another between the same town and another town. We can assign specific multipliers to the types of settlements and use them to adjust the length of paths. Say, a multiplier for “town” will be 0.5, and for a “waystation” — 2. This will make the route between two towns “shorter” that the route between a town and a waystation. As a result, the Dijkstra algorithm will be giving preference to these “shorter” paths. Now, how can we implement this?</p>
<p>These are the types of nodes that we have. We add multipliers that will help us to reduce or to increase “lengths” of routes based on the types of nodes that they connect.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="l10-gis-iv.html#cb114-1" aria-hidden="true" tabindex="-1"></a>types <span class="ot">&lt;-</span> nodes<span class="sc">$</span>top_type <span class="sc">%&gt;%</span></span>
<span id="cb114-2"><a href="l10-gis-iv.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb114-3"><a href="l10-gis-iv.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-4"><a href="l10-gis-iv.html#cb114-4" aria-hidden="true" tabindex="-1"></a>types <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">type =</span> types,</span>
<span id="cb114-5"><a href="l10-gis-iv.html#cb114-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">mltp =</span> <span class="fu">c</span>(<span class="fl">0.33</span>, <span class="fl">0.25</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb114-6"><a href="l10-gis-iv.html#cb114-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-7"><a href="l10-gis-iv.html#cb114-7" aria-hidden="true" tabindex="-1"></a>types</span></code></pre></div>
<pre><code>## # A tibble: 9 x 2
##   type         mltp
##   &lt;chr&gt;       &lt;dbl&gt;
## 1 capitals     0.33
## 2 metropoles   0.25
## 3 quarters     1   
## 4 sites        1   
## 5 towns        0.5 
## 6 villages     1   
## 7 waters       2   
## 8 waystations  2   
## 9 xroads       2</code></pre>
<p>First, let’s add these multipliers to our nodes:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="l10-gis-iv.html#cb116-1" aria-hidden="true" tabindex="-1"></a>nodesM <span class="ot">&lt;-</span> nodes <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="l10-gis-iv.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(types, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;top_type&quot;</span> <span class="ot">=</span> <span class="st">&quot;type&quot;</span>))</span>
<span id="cb116-3"><a href="l10-gis-iv.html#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="l10-gis-iv.html#cb116-4" aria-hidden="true" tabindex="-1"></a>nodesM</span></code></pre></div>
<pre><code>## # A tibble: 1,692 x 7
##    settlement_id       names_eng_transl… region_URI top_type     lon   lat  mltp
##    &lt;chr&gt;               &lt;chr&gt;             &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 QAHIRA_312E300N_S   al-Qāhiraŧ        Misr_RE    metropol… 31.2    30.0  0.25
##  2 WASHQA_003W421N_S   Wašqaŧ            Andalus_RE towns     -0.354  42.2  0.5 
##  3 BALANSIYYA_004W394… Balansiyyaŧ       Andalus_RE towns     -0.415  39.4  0.5 
##  4 SHAQR_004W391N_S    al-Šaqr           Andalus_RE villages  -0.437  39.2  1   
##  5 QANT_004W383N_S     Qānt              Andalus_RE towns     -0.471  38.3  0.5 
##  6 SHATIBA_005W389N_S  Šātibaŧ           Andalus_RE towns     -0.523  39.0  0.5 
##  7 SARAQUSA_009W416N_S Saraqūsaŧ         Andalus_RE towns     -0.929  41.6  0.5 
##  8 MURSIYA_011W379N_S  Mursiyaŧ          Andalus_RE towns     -1.11   38.0  0.5 
##  9 TUTILA_016W420N_S   Tuṭīlaŧ           Andalus_RE towns     -1.63   42.0  0.5 
## 10 LURQA_017W376N_S    Lurqaŧ            Andalus_RE towns     -1.73   37.7  0.5 
## # … with 1,682 more rows</code></pre>
<p>We also have additional classification of routes in terms of terrain and safety. We can use these as additional multipliers. (These may be more efficient, but they are more time consuming to create.)</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="l10-gis-iv.html#cb118-1" aria-hidden="true" tabindex="-1"></a>terrainDF <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">&quot;terrain&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;desert&quot;</span>, <span class="st">&quot;normal&quot;</span>, <span class="st">&quot;mountain&quot;</span>, <span class="st">&quot;river&quot;</span>),</span>
<span id="cb118-2"><a href="l10-gis-iv.html#cb118-2" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;mltp&quot;</span>   <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="fl">1.25</span>, <span class="fl">0.75</span>))</span>
<span id="cb118-3"><a href="l10-gis-iv.html#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="l10-gis-iv.html#cb118-4" aria-hidden="true" tabindex="-1"></a>terrainDF</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   terrain   mltp
##   &lt;chr&gt;    &lt;dbl&gt;
## 1 desert    2   
## 2 normal    1   
## 3 mountain  1.25
## 4 river     0.75</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="l10-gis-iv.html#cb120-1" aria-hidden="true" tabindex="-1"></a>safetyDF <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">&quot;safety&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;dangerous&quot;</span>, <span class="st">&quot;safe&quot;</span>, <span class="st">&quot;normal&quot;</span>),</span>
<span id="cb120-2"><a href="l10-gis-iv.html#cb120-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;mltp&quot;</span>   <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="fl">0.75</span>, <span class="dv">1</span>))</span>
<span id="cb120-3"><a href="l10-gis-iv.html#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="l10-gis-iv.html#cb120-4" aria-hidden="true" tabindex="-1"></a>safetyDF</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   safety     mltp
##   &lt;chr&gt;     &lt;dbl&gt;
## 1 dangerous  2   
## 2 safe       0.75
## 3 normal     1</code></pre>
<p>Now, we can generate new “weights” for our edges.</p>
<p><strong>Note</strong>: there are no strict rules with regard to how you modify your network, your nodes and your edges; it must make sense, so, use your judgement; consult your peers and your advisers; always clearly describe the process of your modifications. For example, the following is happenning below: we multiply the length in meters by the sum of node multipliers (here lower values will turn nodes into magnets of sorts—metropoles and capitals will act as natural attractors); then we multiply the resulting values by the sum of “terrain” and “safety” multipliers (here higher values will make edges “longer”—i.e, routes that go through deserts will become longer than routes ging through a plain).</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="l10-gis-iv.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simply reloading edges data</span></span>
<span id="cb122-2"><a href="l10-gis-iv.html#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="l10-gis-iv.html#cb122-3" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/routes.csv&quot;</span>, </span>
<span id="cb122-4"><a href="l10-gis-iv.html#cb122-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   route_id = col_character(),
##   sToponym = col_character(),
##   sToponym_type = col_character(),
##   eToponym = col_character(),
##   eToponym_type = col_character(),
##   terrain = col_character(),
##   safety = col_character(),
##   coordinates = col_character(),
##   meter = col_double()
## )</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="l10-gis-iv.html#cb124-1" aria-hidden="true" tabindex="-1"></a>edges <span class="ot">&lt;-</span> edges <span class="sc">%&gt;%</span></span>
<span id="cb124-2"><a href="l10-gis-iv.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> meter) <span class="sc">%&gt;%</span></span>
<span id="cb124-3"><a href="l10-gis-iv.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sToponym, eToponym, weight, meter, terrain, safety)</span>
<span id="cb124-4"><a href="l10-gis-iv.html#cb124-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-5"><a href="l10-gis-iv.html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(edges)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   sToponym           eToponym            weight meter terrain  safety   
##   &lt;chr&gt;              &lt;chr&gt;                &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    
## 1 RIHA_354E318N_S    NABULUS_352E322N_S   48742 48742 mountain safe     
## 2 ZARQA_360E320N_S   AMMAN_359E319N_S     22288 22288 river    dangerous
## 3 ZARQA_360E320N_S   ADHRIAT_360E326N_S   67802 67802 desert   normal   
## 4 ADHRIAT_360E326N_S ZARQA_360E320N_S     61334 61334 mountain dangerous
## 5 NAWA_360E328N_S    ADHRIAT_360E326N_S   31554 31554 normal   safe     
## 6 JASIM_360E329N_S   AQABAFIQ_356E327N_S  41808 41808 mountain safe</code></pre>
<p>Now, updating the weights based on our multipliers:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="l10-gis-iv.html#cb126-1" aria-hidden="true" tabindex="-1"></a>nodesL <span class="ot">&lt;-</span> nodesM <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="l10-gis-iv.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(settlement_id, mltp)</span>
<span id="cb126-3"><a href="l10-gis-iv.html#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="l10-gis-iv.html#cb126-4" aria-hidden="true" tabindex="-1"></a>edgesM <span class="ot">&lt;-</span> edges <span class="sc">%&gt;%</span></span>
<span id="cb126-5"><a href="l10-gis-iv.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodesL, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;sToponym&quot;</span> <span class="ot">=</span> <span class="st">&quot;settlement_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb126-6"><a href="l10-gis-iv.html#cb126-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodesL, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;eToponym&quot;</span> <span class="ot">=</span> <span class="st">&quot;settlement_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb126-7"><a href="l10-gis-iv.html#cb126-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(terrainDF, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;terrain&quot;</span> <span class="ot">=</span> <span class="st">&quot;terrain&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb126-8"><a href="l10-gis-iv.html#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(safetyDF, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;safety&quot;</span> <span class="ot">=</span> <span class="st">&quot;safety&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb126-9"><a href="l10-gis-iv.html#cb126-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_mod =</span> meter) <span class="sc">%&gt;%</span></span>
<span id="cb126-10"><a href="l10-gis-iv.html#cb126-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_mod =</span> weight_mod <span class="sc">*</span> (mltp.x <span class="sc">+</span> mltp.y)) <span class="sc">%&gt;%</span></span>
<span id="cb126-11"><a href="l10-gis-iv.html#cb126-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_mod =</span> weight_mod <span class="sc">*</span> (mltp.x.x <span class="sc">+</span> mltp.y.y))</span>
<span id="cb126-12"><a href="l10-gis-iv.html#cb126-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-13"><a href="l10-gis-iv.html#cb126-13" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(edgesM)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 11
##   sToponym eToponym weight meter terrain safety mltp.x mltp.y mltp.x.x mltp.y.y
##   &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 RIHA_35… NABULUS…  48742 48742 mounta… safe     0.5    0.5      1.25     0.75
## 2 ZARQA_3… AMMAN_3…  22288 22288 river   dange…   2      0.5      0.75     2   
## 3 ZARQA_3… ADHRIAT…  67802 67802 desert  normal   2      0.33     2        1   
## 4 ADHRIAT… ZARQA_3…  61334 61334 mounta… dange…   0.33   2        1.25     2   
## 5 NAWA_36… ADHRIAT…  31554 31554 normal  safe     0.5    0.33     1        0.75
## 6 JASIM_3… AQABAFI…  41808 41808 mounta… safe     2      1        1.25     0.75
## # … with 1 more variable: weight_mod &lt;dbl&gt;</code></pre>
<p>Now, let’s try to find the shortest route with our new data:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="l10-gis-iv.html#cb128-1" aria-hidden="true" tabindex="-1"></a>iwNetworkMod <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d=</span>edgesM, <span class="at">vertices=</span>nodesM, <span class="at">directed=</span><span class="cn">FALSE</span>)</span>
<span id="cb128-2"><a href="l10-gis-iv.html#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="l10-gis-iv.html#cb128-3" aria-hidden="true" tabindex="-1"></a>baghdad_to_damascusMod <span class="ot">&lt;-</span> <span class="fu">shortest_paths</span>(iwNetworkMod, <span class="at">from =</span> <span class="st">&quot;BAGHDAD_443E333N_S&quot;</span>, <span class="at">to =</span> <span class="st">&quot;DIMASHQ_363E335N_S&quot;</span>, <span class="at">weights =</span> <span class="fu">E</span>(iwNetworkMod)<span class="sc">$</span>weight_mod)<span class="sc">$</span>vpath</span>
<span id="cb128-4"><a href="l10-gis-iv.html#cb128-4" aria-hidden="true" tabindex="-1"></a>baghdad_to_damascusMod <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">unlist</span>(baghdad_to_damascusMod))</span>
<span id="cb128-5"><a href="l10-gis-iv.html#cb128-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-6"><a href="l10-gis-iv.html#cb128-6" aria-hidden="true" tabindex="-1"></a>pathMod <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ID =</span> baghdad_to_damascusMod) <span class="sc">%&gt;%</span></span>
<span id="cb128-7"><a href="l10-gis-iv.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span> <span class="ot">=</span> <span class="st">&quot;settlement_id&quot;</span>))</span>
<span id="cb128-8"><a href="l10-gis-iv.html#cb128-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-9"><a href="l10-gis-iv.html#cb128-9" aria-hidden="true" tabindex="-1"></a>pathModLabels <span class="ot">&lt;-</span> pathMod <span class="sc">%&gt;%</span></span>
<span id="cb128-10"><a href="l10-gis-iv.html#cb128-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> names_eng_translit) <span class="sc">%&gt;%</span></span>
<span id="cb128-11"><a href="l10-gis-iv.html#cb128-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(top_type <span class="sc">==</span> <span class="st">&quot;metropoles&quot;</span> <span class="sc">|</span> top_type <span class="sc">==</span> <span class="st">&quot;capitals&quot;</span>)</span>
<span id="cb128-12"><a href="l10-gis-iv.html#cb128-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-13"><a href="l10-gis-iv.html#cb128-13" aria-hidden="true" tabindex="-1"></a>annotData <span class="ot">&lt;-</span> pathMod</span>
<span id="cb128-14"><a href="l10-gis-iv.html#cb128-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-15"><a href="l10-gis-iv.html#cb128-15" aria-hidden="true" tabindex="-1"></a>IslamicWorldBaseBare <span class="sc">+</span> </span>
<span id="cb128-16"><a href="l10-gis-iv.html#cb128-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat), <span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span> </span>
<span id="cb128-17"><a href="l10-gis-iv.html#cb128-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> annotData, <span class="fu">aes</span>(<span class="at">x=</span>lon, <span class="at">y=</span>lat), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb128-18"><a href="l10-gis-iv.html#cb128-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data =</span> pathModLabels, <span class="fu">aes</span>(<span class="at">label =</span> label, <span class="at">x=</span>lon, <span class="at">y=</span>lat), <span class="at">max.overlaps =</span> <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb128-19"><a href="l10-gis-iv.html#cb128-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(annotData<span class="sc">$</span>lon)<span class="sc">-</span><span class="dv">5</span>, <span class="fu">max</span>(annotData<span class="sc">$</span>lon)<span class="sc">+</span><span class="dv">5</span>),</span>
<span id="cb128-20"><a href="l10-gis-iv.html#cb128-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(annotData<span class="sc">$</span>lat)<span class="sc">-</span><span class="dv">3</span>, <span class="fu">max</span>(annotData<span class="sc">$</span>lat)<span class="sc">+</span><span class="dv">3</span>),</span>
<span id="cb128-21"><a href="l10-gis-iv.html#cb128-21" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="RGIS2021S_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<p>As you can see, the results are quite what we wanted. This is is not the easiest approach to implement, but it will give you full control over modeling different processes within your geographical networks. (<strong>Important:</strong> the data used in this section is not complete; “terrain” and “safety” classifications are random, except for this specific example.)</p>
</div>
<div id="clusters-andor-communities" class="section level3" number="10.4.8">
<h3><span class="header-section-number">10.4.8</span> Clusters and/or Communities</h3>
<p>A way to find large components of any network is to apply some cluster analysis algorithms. There are many different algorithms which are included in <code>igraph</code>. One needs to understand how they work and for which purposes they have been developed. For our current context, the following algorithms are most fitting. Please, check additional references at the end of the lesson for more details.</p>
<p>Let’s reload our data. For cluster analysis we will need to modify weights of our edges, since cluster analysis algorithms expect more important edges to have higher weight—in other words, shorter routes must have higher weight than longer ones (for the Dijkstra algorithm we needed the opposite).</p>
<p>I will condense everything in one block:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="l10-gis-iv.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># file with additional metadata on nodes</span></span>
<span id="cb129-2"><a href="l10-gis-iv.html#cb129-2" aria-hidden="true" tabindex="-1"></a>mapLayer <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/topMicroUPD.csv&quot;</span>, <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-3"><a href="l10-gis-iv.html#cb129-3" aria-hidden="true" tabindex="-1"></a>mapLayer_Filtered <span class="ot">&lt;-</span> mapLayer <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(aRegion))</span>
<span id="cb129-4"><a href="l10-gis-iv.html#cb129-4" aria-hidden="true" tabindex="-1"></a>aRegions <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/top_aRegions_VizCenters.csv&quot;</span>, <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-5"><a href="l10-gis-iv.html#cb129-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-6"><a href="l10-gis-iv.html#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="co"># processing main data: loading edges and creating a network object</span></span>
<span id="cb129-7"><a href="l10-gis-iv.html#cb129-7" aria-hidden="true" tabindex="-1"></a>althurayyaE <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/althurayya_edges.csv&quot;</span>, <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-8"><a href="l10-gis-iv.html#cb129-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> <span class="fu">signif</span>(<span class="dv">1</span><span class="sc">/</span>length<span class="sc">*</span><span class="dv">10000</span>, <span class="at">digits=</span><span class="dv">2</span>))</span>
<span id="cb129-9"><a href="l10-gis-iv.html#cb129-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-10"><a href="l10-gis-iv.html#cb129-10" aria-hidden="true" tabindex="-1"></a>althurayyaNetwork <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d=</span>althurayyaE, <span class="at">directed=</span>F)</span>
<span id="cb129-11"><a href="l10-gis-iv.html#cb129-11" aria-hidden="true" tabindex="-1"></a>althurayyaNetwork <span class="ot">&lt;-</span> <span class="fu">simplify</span>(althurayyaNetwork) <span class="co"># this helps to remove duplicate edges and loop edges</span></span>
<span id="cb129-12"><a href="l10-gis-iv.html#cb129-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-13"><a href="l10-gis-iv.html#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="co"># centrality measures</span></span>
<span id="cb129-14"><a href="l10-gis-iv.html#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>degree <span class="ot">&lt;-</span> <span class="fu">degree</span>(althurayyaNetwork, <span class="at">mode=</span><span class="st">&quot;all&quot;</span>)</span>
<span id="cb129-15"><a href="l10-gis-iv.html#cb129-15" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>eigenvector <span class="ot">&lt;-</span> <span class="fu">eigen_centrality</span>(althurayyaNetwork)<span class="sc">$</span>vector</span>
<span id="cb129-16"><a href="l10-gis-iv.html#cb129-16" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>betweenness <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(althurayyaNetwork, <span class="at">directed=</span>F)</span>
<span id="cb129-17"><a href="l10-gis-iv.html#cb129-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-18"><a href="l10-gis-iv.html#cb129-18" aria-hidden="true" tabindex="-1"></a><span class="co"># clustering (selected algorithms) some of these alrgorithms may take a minute of two to run</span></span>
<span id="cb129-19"><a href="l10-gis-iv.html#cb129-19" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>cl_walktrap <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_walktrap</span>(althurayyaNetwork)<span class="sc">$</span>membership)</span>
<span id="cb129-20"><a href="l10-gis-iv.html#cb129-20" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>cl_leading_eigen <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_leading_eigen</span>(althurayyaNetwork)<span class="sc">$</span>membership)</span>
<span id="cb129-21"><a href="l10-gis-iv.html#cb129-21" aria-hidden="true" tabindex="-1"></a><span class="co">#V(althurayyaNetwork)$cl_edge_betweenness &lt;- as.character(cluster_edge_betweenness(althurayyaNetwork)$membership) # this one is tooooo slow</span></span>
<span id="cb129-22"><a href="l10-gis-iv.html#cb129-22" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>cl_fast_greedy <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_fast_greedy</span>(althurayyaNetwork)<span class="sc">$</span>membership)</span>
<span id="cb129-23"><a href="l10-gis-iv.html#cb129-23" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(althurayyaNetwork)<span class="sc">$</span>cl_louvain <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_louvain</span>(althurayyaNetwork)<span class="sc">$</span>membership)</span>
<span id="cb129-24"><a href="l10-gis-iv.html#cb129-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-25"><a href="l10-gis-iv.html#cb129-25" aria-hidden="true" tabindex="-1"></a><span class="co"># extract nodes/vertices for mapping</span></span>
<span id="cb129-26"><a href="l10-gis-iv.html#cb129-26" aria-hidden="true" tabindex="-1"></a>althurayyaNodes <span class="ot">&lt;-</span> <span class="fu">as_data_frame</span>(althurayyaNetwork, <span class="at">what=</span><span class="st">&quot;vertices&quot;</span>)</span>
<span id="cb129-27"><a href="l10-gis-iv.html#cb129-27" aria-hidden="true" tabindex="-1"></a>althurayyaNodes <span class="ot">&lt;-</span> althurayyaNodes <span class="sc">%&gt;%</span></span>
<span id="cb129-28"><a href="l10-gis-iv.html#cb129-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">URI =</span> name) <span class="sc">%&gt;%</span></span>
<span id="cb129-29"><a href="l10-gis-iv.html#cb129-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapLayer, <span class="at">by=</span><span class="st">&quot;URI&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-30"><a href="l10-gis-iv.html#cb129-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(aRegion))</span>
<span id="cb129-31"><a href="l10-gis-iv.html#cb129-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-32"><a href="l10-gis-iv.html#cb129-32" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(althurayyaNodes)</span></code></pre></div>
<pre><code>##                   URI degree  eigenvector betweenness cl_walktrap
## 1   ABADHA_526E311N_S      2 4.131897e-18      4681.0          10
## 2   ABADHA_537E297N_S      2 3.210258e-18      3476.5           1
## 3 ABARKATH_673E397N_S      2 7.382432e-18         0.0          24
## 4  ABARQUH_532E311N_S      2 0.000000e+00      6596.0          84
## 5  ABASKUN_540E370N_S      1 1.765351e-18         0.0          11
## 6  ABBADAN_482E303N_S      2 5.084214e-18    416626.2          19
##   cl_leading_eigen cl_fast_greedy cl_louvain       REG_MESO        aRegion
## 1                1             39         25        Fars_RE     SW_Iran_MR
## 2                1             36         26        Fars_RE     SW_Iran_MR
## 3                1             47          8 Mawarannahr_RE Mawarannahr_MR
## 4                1             36         26        Fars_RE     SW_Iran_MR
## 5                1             13         35      Daylam_RE     NW_Iran_MR
## 6                1              7          9        Iraq_RE        Iraq_MR
##         TR           SEARCH   EN     TYPE      LON      LAT     AR       AR_Alt
## 1   Ābāḏaŧ   Abadha|Arjuman &lt;NA&gt;    towns 52.66127 31.16430  آباذة آباذة|أرجمان
## 2   Ābāḏaŧ           Abadha &lt;NA&gt;    towns 53.73617 29.78210  آباذة        آباذة
## 3  Abārkaṯ Abarkath|Barkath &lt;NA&gt; capitals 67.38308 39.79611 أباركث أباركث|بركاث
## 4  Abarqūh          Abarquh &lt;NA&gt;    towns 53.25737 31.15094 أبرقوه       أبرقوه
## 5  Ābaskūn          Abaskun &lt;NA&gt;    towns 54.04327 37.02772 آبسكون       آبسكون
## 6 ʿAbbādān          Abbadan &lt;NA&gt;    towns 48.27394 30.33563 عبادان       عبادان
##   AR_Sort AMBIG TRUETOP   TOPO
## 1   اباذة     0       0  اباذة
## 2   اباذة     0       0  اباذة
## 3  اباركث     0       1 اباركث
## 4  ابرقوه     0       0 ابرقوه
## 5  ابسكون     0       0 ابسكون
## 6  عبادان     0       0 عبادان</code></pre>
<p>Let’s quickly redo the base layer:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="l10-gis-iv.html#cb131-1" aria-hidden="true" tabindex="-1"></a>IslamicWorldBase <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>world) <span class="sc">+</span></span>
<span id="cb131-2"><a href="l10-gis-iv.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">fill=</span>colLand, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">lwd=</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb131-3"><a href="l10-gis-iv.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rivers, aral sea, and routes</span></span>
<span id="cb131-4"><a href="l10-gis-iv.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>routes_df, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>id), <span class="at">color=</span>colRout, <span class="at">size=</span>.<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb131-5"><a href="l10-gis-iv.html#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data=</span>rivers_df, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>group), <span class="at">color=</span>colWater, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">size=</span>.<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb131-6"><a href="l10-gis-iv.html#cb131-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">data=</span>aral_sea_df, <span class="fu">aes</span>(<span class="at">x=</span>long, <span class="at">y=</span>lat, <span class="at">group=</span>group), <span class="at">color=</span>colWater, <span class="at">fill=</span>colWater, <span class="at">size=</span>.<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb131-7"><a href="l10-gis-iv.html#cb131-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major=</span><span class="fu">element_line</span>(<span class="at">color=</span>colWater, <span class="at">linetype=</span><span class="st">&quot;dotted&quot;</span>, <span class="at">size=</span><span class="fl">0.5</span>),</span>
<span id="cb131-8"><a href="l10-gis-iv.html#cb131-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background=</span><span class="fu">element_rect</span>(<span class="at">fill=</span>colWater),<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>, <span class="at">panel.border=</span><span class="fu">element_blank</span>())</span></code></pre></div>
<p>We now have a lot of new data to check:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="l10-gis-iv.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let&#39;s filter out the smallest nodes (xroads and waystations)</span></span>
<span id="cb132-2"><a href="l10-gis-iv.html#cb132-2" aria-hidden="true" tabindex="-1"></a>althurayyaNodesFilt <span class="ot">&lt;-</span> althurayyaNodes <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="l10-gis-iv.html#cb132-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(TYPE <span class="sc">!=</span> <span class="st">&quot;waystations&quot;</span> <span class="sc">&amp;</span> TYPE <span class="sc">!=</span> <span class="st">&quot;sites&quot;</span> <span class="sc">&amp;</span> TYPE <span class="sc">!=</span> <span class="st">&quot;quarters&quot;</span> <span class="sc">&amp;</span> TYPE <span class="sc">!=</span> <span class="st">&quot;waters&quot;</span>)</span>
<span id="cb132-4"><a href="l10-gis-iv.html#cb132-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-5"><a href="l10-gis-iv.html#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="co"># final map</span></span>
<span id="cb132-6"><a href="l10-gis-iv.html#cb132-6" aria-hidden="true" tabindex="-1"></a>currentMap <span class="ot">&lt;-</span> IslamicWorldBase <span class="sc">+</span> </span>
<span id="cb132-7"><a href="l10-gis-iv.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_encircle</span>(<span class="at">data=</span>mapLayer_Filtered, <span class="at">s_shape=</span>.<span class="dv">1</span>, <span class="at">expand=</span><span class="fl">0.01</span>, <span class="at">alpha=</span>.<span class="dv">15</span>, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">col=</span>aRegion, <span class="at">fill=</span>aRegion, <span class="at">group=</span>aRegion)) <span class="sc">+</span></span>
<span id="cb132-8"><a href="l10-gis-iv.html#cb132-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>althurayyaNodesFilt, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">color=</span>cl_louvain), <span class="at">size=</span><span class="fl">0.25</span>, <span class="at">alpha=</span><span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb132-9"><a href="l10-gis-iv.html#cb132-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label=</span><span class="st">&quot;cl_louvain&quot;</span>, <span class="at">x=</span><span class="dv">80</span>, <span class="at">y=</span><span class="fl">12.5</span>, <span class="at">angle=</span><span class="dv">0</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">vjust=</span><span class="dv">0</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb132-10"><a href="l10-gis-iv.html#cb132-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb132-11"><a href="l10-gis-iv.html#cb132-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb132-12"><a href="l10-gis-iv.html#cb132-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>)</span>
<span id="cb132-13"><a href="l10-gis-iv.html#cb132-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb132-14"><a href="l10-gis-iv.html#cb132-14" aria-hidden="true" tabindex="-1"></a><span class="co"># and saving</span></span>
<span id="cb132-15"><a href="l10-gis-iv.html#cb132-15" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(currentMap))</span>
<span id="cb132-16"><a href="l10-gis-iv.html#cb132-16" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb132-17"><a href="l10-gis-iv.html#cb132-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_cl_louvain.png&quot;</span>),</span>
<span id="cb132-18"><a href="l10-gis-iv.html#cb132-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb132-19"><a href="l10-gis-iv.html#cb132-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="fl">8.4</span>,<span class="at">height=</span><span class="fl">4.65</span>)</span></code></pre></div>
<p><img src="files/networks/IW_cl_louvain.png" /></p>
</div>
<div id="centrality-measures-degree-and-betweenness" class="section level3" number="10.4.9">
<h3><span class="header-section-number">10.4.9</span> Centrality measures: Degree and Betweenness</h3>
<p>We have already calculated those (you can find relevant lines of code by searchinf for “degree” and “betweenness”).</p>
<p>Degrees will show us the most highly connected nodes in the network.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="l10-gis-iv.html#cb133-1" aria-hidden="true" tabindex="-1"></a>althurayyaDegreeLabels <span class="ot">&lt;-</span> althurayyaNodes <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="l10-gis-iv.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> degree, <span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb133-3"><a href="l10-gis-iv.html#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="l10-gis-iv.html#cb133-4" aria-hidden="true" tabindex="-1"></a>minVal <span class="ot">=</span> <span class="fu">min</span>(althurayyaNodes<span class="sc">$</span>degree)</span>
<span id="cb133-5"><a href="l10-gis-iv.html#cb133-5" aria-hidden="true" tabindex="-1"></a>maxVal <span class="ot">=</span> <span class="fu">max</span>(althurayyaNodes<span class="sc">$</span>degree)</span>
<span id="cb133-6"><a href="l10-gis-iv.html#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="l10-gis-iv.html#cb133-7" aria-hidden="true" tabindex="-1"></a>lowColor <span class="ot">=</span> <span class="st">&quot;darkgreen&quot;</span></span>
<span id="cb133-8"><a href="l10-gis-iv.html#cb133-8" aria-hidden="true" tabindex="-1"></a>highColor <span class="ot">=</span> <span class="st">&quot;red&quot;</span></span>
<span id="cb133-9"><a href="l10-gis-iv.html#cb133-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-10"><a href="l10-gis-iv.html#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="co"># final map</span></span>
<span id="cb133-11"><a href="l10-gis-iv.html#cb133-11" aria-hidden="true" tabindex="-1"></a>currentMap <span class="ot">&lt;-</span> IslamicWorldBase <span class="sc">+</span> </span>
<span id="cb133-12"><a href="l10-gis-iv.html#cb133-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>althurayyaNodesFilt, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">color=</span>degree, <span class="at">size=</span>degree, <span class="at">alpha=</span>degree)) <span class="sc">+</span></span>
<span id="cb133-13"><a href="l10-gis-iv.html#cb133-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data=</span>althurayyaDegreeLabels, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">label=</span>TR), <span class="at">size=</span><span class="fl">1.5</span>, <span class="at">segment.size=</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb133-14"><a href="l10-gis-iv.html#cb133-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label=</span><span class="st">&quot;degrees&quot;</span>, <span class="at">x=</span><span class="dv">80</span>, <span class="at">y=</span><span class="fl">12.5</span>, <span class="at">angle=</span><span class="dv">0</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">vjust=</span><span class="dv">0</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb133-15"><a href="l10-gis-iv.html#cb133-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb133-16"><a href="l10-gis-iv.html#cb133-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb133-17"><a href="l10-gis-iv.html#cb133-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb133-18"><a href="l10-gis-iv.html#cb133-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_gradient</span>(<span class="at">low=</span>lowColor, <span class="at">high=</span>highColor) <span class="sc">+</span></span>
<span id="cb133-19"><a href="l10-gis-iv.html#cb133-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="fl">0.001</span>,<span class="dv">3</span>), <span class="at">limits=</span><span class="fu">c</span>(minVal,maxVal))</span>
<span id="cb133-20"><a href="l10-gis-iv.html#cb133-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-21"><a href="l10-gis-iv.html#cb133-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-22"><a href="l10-gis-iv.html#cb133-22" aria-hidden="true" tabindex="-1"></a><span class="co"># and saving</span></span>
<span id="cb133-23"><a href="l10-gis-iv.html#cb133-23" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(currentMap))</span>
<span id="cb133-24"><a href="l10-gis-iv.html#cb133-24" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb133-25"><a href="l10-gis-iv.html#cb133-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_degrees.png&quot;</span>),</span>
<span id="cb133-26"><a href="l10-gis-iv.html#cb133-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb133-27"><a href="l10-gis-iv.html#cb133-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="dv">8</span>,<span class="at">height=</span><span class="fl">4.6</span>)</span></code></pre></div>
<p><img src="files/networks/IW_degrees.png" /></p>
<p>Betweenness will show the most …</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="l10-gis-iv.html#cb134-1" aria-hidden="true" tabindex="-1"></a>althurayyaDegreeLabels <span class="ot">&lt;-</span> althurayyaNodes <span class="sc">%&gt;%</span></span>
<span id="cb134-2"><a href="l10-gis-iv.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> betweenness, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb134-3"><a href="l10-gis-iv.html#cb134-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-4"><a href="l10-gis-iv.html#cb134-4" aria-hidden="true" tabindex="-1"></a>minVal <span class="ot">=</span> <span class="fu">min</span>(althurayyaNodes<span class="sc">$</span>betweenness)</span>
<span id="cb134-5"><a href="l10-gis-iv.html#cb134-5" aria-hidden="true" tabindex="-1"></a>maxVal <span class="ot">=</span> <span class="fu">max</span>(althurayyaNodes<span class="sc">$</span>betweenness)</span>
<span id="cb134-6"><a href="l10-gis-iv.html#cb134-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-7"><a href="l10-gis-iv.html#cb134-7" aria-hidden="true" tabindex="-1"></a>lowColor <span class="ot">=</span> <span class="st">&quot;darkgreen&quot;</span></span>
<span id="cb134-8"><a href="l10-gis-iv.html#cb134-8" aria-hidden="true" tabindex="-1"></a>highColor <span class="ot">=</span> <span class="st">&quot;red&quot;</span></span>
<span id="cb134-9"><a href="l10-gis-iv.html#cb134-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-10"><a href="l10-gis-iv.html#cb134-10" aria-hidden="true" tabindex="-1"></a><span class="co"># final map</span></span>
<span id="cb134-11"><a href="l10-gis-iv.html#cb134-11" aria-hidden="true" tabindex="-1"></a>currentMap <span class="ot">&lt;-</span> IslamicWorldBase <span class="sc">+</span> </span>
<span id="cb134-12"><a href="l10-gis-iv.html#cb134-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>althurayyaNodes, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">color=</span>betweenness, <span class="at">size=</span>betweenness, <span class="at">alpha=</span>betweenness)) <span class="sc">+</span></span>
<span id="cb134-13"><a href="l10-gis-iv.html#cb134-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label_repel</span>(<span class="at">data=</span>althurayyaDegreeLabels, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">label=</span>TR), <span class="at">size=</span><span class="fl">1.5</span>, <span class="at">segment.size=</span><span class="fl">0.25</span>, <span class="at">max.overlaps =</span> <span class="dv">100</span>) <span class="sc">+</span></span>
<span id="cb134-14"><a href="l10-gis-iv.html#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label=</span><span class="st">&quot;degrees&quot;</span>, <span class="at">x=</span><span class="dv">80</span>, <span class="at">y=</span><span class="fl">12.5</span>, <span class="at">angle=</span><span class="dv">0</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">vjust=</span><span class="dv">0</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb134-15"><a href="l10-gis-iv.html#cb134-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb134-16"><a href="l10-gis-iv.html#cb134-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb134-17"><a href="l10-gis-iv.html#cb134-17" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb134-18"><a href="l10-gis-iv.html#cb134-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_gradient</span>(<span class="at">low=</span>lowColor, <span class="at">high=</span>highColor) <span class="sc">+</span></span>
<span id="cb134-19"><a href="l10-gis-iv.html#cb134-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="fl">0.001</span>,<span class="dv">3</span>), <span class="at">limits=</span><span class="fu">c</span>(minVal,maxVal))</span>
<span id="cb134-20"><a href="l10-gis-iv.html#cb134-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-21"><a href="l10-gis-iv.html#cb134-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb134-22"><a href="l10-gis-iv.html#cb134-22" aria-hidden="true" tabindex="-1"></a><span class="co"># and saving</span></span>
<span id="cb134-23"><a href="l10-gis-iv.html#cb134-23" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(currentMap))</span>
<span id="cb134-24"><a href="l10-gis-iv.html#cb134-24" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb134-25"><a href="l10-gis-iv.html#cb134-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_betweenness.png&quot;</span>),</span>
<span id="cb134-26"><a href="l10-gis-iv.html#cb134-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb134-27"><a href="l10-gis-iv.html#cb134-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="dv">8</span>,<span class="at">height=</span><span class="fl">4.6</span>)</span></code></pre></div>
<p><img src="files/networks/IW_betweenness.png" /></p>
</div>
<div id="sparsifying-a-network" class="section level3" number="10.4.10">
<h3><span class="header-section-number">10.4.10</span> Sparsifying a Network</h3>
<p>In some cases your network may be too dense. This will effecively mean that you will not be able to get anything useful from social network analysis methods. What one needs to do in this case is to make the network more sparse. There is a number of ways how one can do this. Ideally, one needs to remodel the network by revising parameters that go into the weights of edges. The simplest way to “sparsify” a network is by deleting edges whose weight is below a certain threshold. In the example below, edges whose value is below <code>mean</code> are deleted from the network. As a result the network should break down into more distinct communities (or, actually, disconnected components).</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="l10-gis-iv.html#cb135-1" aria-hidden="true" tabindex="-1"></a>cut.off <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="fu">E</span>(iwNetwork)<span class="sc">$</span>weight)</span>
<span id="cb135-2"><a href="l10-gis-iv.html#cb135-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-3"><a href="l10-gis-iv.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">E</span>(iwNetwork)<span class="sc">$</span>weight)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1687   23842   38387   55530   62771  861693</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="l10-gis-iv.html#cb137-1" aria-hidden="true" tabindex="-1"></a>cutt.off <span class="ot">&lt;-</span> <span class="dv">62771</span></span>
<span id="cb137-2"><a href="l10-gis-iv.html#cb137-2" aria-hidden="true" tabindex="-1"></a>iwNetwork_sparse <span class="ot">&lt;-</span> <span class="fu">delete_edges</span>(iwNetwork, <span class="fu">E</span>(iwNetwork)[weight <span class="sc">&gt;</span> cut.off])</span></code></pre></div>
<p>Let’s try to map these disconnected components:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="l10-gis-iv.html#cb138-1" aria-hidden="true" tabindex="-1"></a>cut.off <span class="ot">&lt;-</span> <span class="dv">62771</span> <span class="co"># 1687   23842   38387   55530   62771  861693 </span></span>
<span id="cb138-2"><a href="l10-gis-iv.html#cb138-2" aria-hidden="true" tabindex="-1"></a>fileName <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_sparse_75f.png&quot;</span>)</span>
<span id="cb138-3"><a href="l10-gis-iv.html#cb138-3" aria-hidden="true" tabindex="-1"></a>iwNetwork_sparse <span class="ot">&lt;-</span> <span class="fu">delete_edges</span>(iwNetwork, <span class="fu">E</span>(iwNetwork)[weight <span class="sc">&gt;=</span> cut.off])</span>
<span id="cb138-4"><a href="l10-gis-iv.html#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="l10-gis-iv.html#cb138-5" aria-hidden="true" tabindex="-1"></a>nodesLight <span class="ot">&lt;-</span> nodes <span class="sc">%&gt;%</span></span>
<span id="cb138-6"><a href="l10-gis-iv.html#cb138-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(settlement_id, lon, lat, top_type)</span>
<span id="cb138-7"><a href="l10-gis-iv.html#cb138-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-8"><a href="l10-gis-iv.html#cb138-8" aria-hidden="true" tabindex="-1"></a>edges_sparce <span class="ot">&lt;-</span> <span class="fu">as_data_frame</span>(iwNetwork_sparse, <span class="at">what=</span><span class="st">&quot;edges&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb138-9"><a href="l10-gis-iv.html#cb138-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(from, to) <span class="sc">%&gt;%</span></span>
<span id="cb138-10"><a href="l10-gis-iv.html#cb138-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodesLight, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;from&quot;</span> <span class="ot">=</span> <span class="st">&quot;settlement_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb138-11"><a href="l10-gis-iv.html#cb138-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(nodesLight, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;to&quot;</span> <span class="ot">=</span> <span class="st">&quot;settlement_id&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb138-12"><a href="l10-gis-iv.html#cb138-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(top_type.x <span class="sc">!=</span> <span class="st">&quot;waystations&quot;</span> <span class="sc">&amp;</span> top_type.x <span class="sc">!=</span> <span class="st">&quot;xroads&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb138-13"><a href="l10-gis-iv.html#cb138-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(top_type.y <span class="sc">!=</span> <span class="st">&quot;waystations&quot;</span> <span class="sc">&amp;</span> top_type.y <span class="sc">!=</span> <span class="st">&quot;xroads&quot;</span>)</span>
<span id="cb138-14"><a href="l10-gis-iv.html#cb138-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb138-15"><a href="l10-gis-iv.html#cb138-15" aria-hidden="true" tabindex="-1"></a>currentMap <span class="ot">&lt;-</span> IslamicWorldBase <span class="sc">+</span> </span>
<span id="cb138-16"><a href="l10-gis-iv.html#cb138-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> edges_sparce, <span class="fu">aes</span>(<span class="at">x=</span>lon.x, <span class="at">y=</span>lat.x, <span class="at">xend=</span>lon.y, <span class="at">yend=</span>lat.y), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb138-17"><a href="l10-gis-iv.html#cb138-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(nodes<span class="sc">$</span>lon)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(nodes<span class="sc">$</span>lon)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb138-18"><a href="l10-gis-iv.html#cb138-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(nodes<span class="sc">$</span>lat)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(nodes<span class="sc">$</span>lat)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb138-19"><a href="l10-gis-iv.html#cb138-19" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>)</span>
<span id="cb138-20"><a href="l10-gis-iv.html#cb138-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-21"><a href="l10-gis-iv.html#cb138-21" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(currentMap))</span>
<span id="cb138-22"><a href="l10-gis-iv.html#cb138-22" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb138-23"><a href="l10-gis-iv.html#cb138-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-24"><a href="l10-gis-iv.html#cb138-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span>fileName,</span>
<span id="cb138-25"><a href="l10-gis-iv.html#cb138-25" aria-hidden="true" tabindex="-1"></a>       <span class="co"># the following line focuses on the graph</span></span>
<span id="cb138-26"><a href="l10-gis-iv.html#cb138-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb138-27"><a href="l10-gis-iv.html#cb138-27" aria-hidden="true" tabindex="-1"></a>       <span class="co"># width and height should be experimentally adjusted to remove white space</span></span>
<span id="cb138-28"><a href="l10-gis-iv.html#cb138-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="fl">8.4</span>,<span class="at">height=</span><span class="fl">4.65</span>)</span></code></pre></div>
<p><img src="files/networks/IW_sparse_75f.png" /></p>
</div>
<div id="other-networks-on-maps" class="section level3" number="10.4.11">
<h3><span class="header-section-number">10.4.11</span> Other networks on maps</h3>
<p>Another valuable—perhaps even most valuable—combination of SNA and GIS is mapping other kinds of data as geographical networks. Let’s take a look at the following example:</p>
<p><img src="files/aa/01.jpg" /></p>
<p><img src="files/aa/02.jpg" /></p>
<p><img src="files/aa/map03.png" /></p>
<p><img src="files/aa/map04.png" /></p>
<p>Let’s create networks from the data.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="l10-gis-iv.html#cb139-1" aria-hidden="true" tabindex="-1"></a>TI_GeoData <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;./data_temp/althurayya/TI_GeoData_for_R.csv&quot;</span>, <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb139-2"><a href="l10-gis-iv.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(TI_GeoData)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   BIO      ITEM   TYPE    
##   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;   
## 1 TI000047 50     DEATH_AH
## 2 TI000048 50     DEATH_AH
## 3 TI000048 البصرة TOPO_PR 
## 4 TI000049 50     DEATH_AH
## 5 TI000050 50     DEATH_AH
## 6 TI000051 50     DEATH_AH</code></pre>
<p>The structure of this data file is as follows: <code>BIO</code> — id of a biography (i.e., a person); <code>ITEM</code> includes a value of a data type defined in the column <code>TYPE</code>. <code>TYPE</code> includes the following values: 1) <code>DEATH_AH</code>—decade of the death of a biographee, according to the Islamic <em>hijrī</em> calendar (<em>anno hegirae</em>); <code>TOPO_PR</code>—a place with which a person is closely associated (“resident of …”); <code>TOPO_SE</code>—a place with which a person is associated (“visitor of …”).</p>
<p>We can split our data into two data frames: with dates and with toponyms.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="l10-gis-iv.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split &gt; ID_Dates and ID_TOPO</span></span>
<span id="cb141-2"><a href="l10-gis-iv.html#cb141-2" aria-hidden="true" tabindex="-1"></a>TIdates <span class="ot">&lt;-</span> TI_GeoData <span class="sc">%&gt;%</span></span>
<span id="cb141-3"><a href="l10-gis-iv.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TYPE<span class="sc">==</span><span class="st">&quot;DEATH_AH&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="l10-gis-iv.html#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">DEATH =</span> ITEM)</span>
<span id="cb141-5"><a href="l10-gis-iv.html#cb141-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb141-6"><a href="l10-gis-iv.html#cb141-6" aria-hidden="true" tabindex="-1"></a>TIdates<span class="sc">$</span>DEATH <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(TIdates<span class="sc">$</span>DEATH)</span>
<span id="cb141-7"><a href="l10-gis-iv.html#cb141-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-8"><a href="l10-gis-iv.html#cb141-8" aria-hidden="true" tabindex="-1"></a>TIgeoData <span class="ot">&lt;-</span> TI_GeoData <span class="sc">%&gt;%</span></span>
<span id="cb141-9"><a href="l10-gis-iv.html#cb141-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(TYPE<span class="sc">==</span><span class="st">&quot;TOPO_PR&quot;</span> <span class="sc">|</span> TYPE<span class="sc">==</span><span class="st">&quot;TOPO_SE&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb141-10"><a href="l10-gis-iv.html#cb141-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TOPO =</span> ITEM)</span></code></pre></div>
<p>Let’s generate a network on the level of primary toponyms (not regional):</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="l10-gis-iv.html#cb142-1" aria-hidden="true" tabindex="-1"></a>NW_Data_Settl <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb142-2"><a href="l10-gis-iv.html#cb142-2" aria-hidden="true" tabindex="-1"></a>idVector <span class="ot">=</span> <span class="fu">unique</span>(TIgeoData<span class="sc">$</span>BIO)</span>
<span id="cb142-3"><a href="l10-gis-iv.html#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="l10-gis-iv.html#cb142-4" aria-hidden="true" tabindex="-1"></a>TIgeoDataRichTOP <span class="ot">&lt;-</span> TIgeoData <span class="sc">%&gt;%</span></span>
<span id="cb142-5"><a href="l10-gis-iv.html#cb142-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapLayer, <span class="at">by=</span><span class="st">&quot;TOPO&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb142-6"><a href="l10-gis-iv.html#cb142-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(aRegion)) <span class="sc">%&gt;%</span></span>
<span id="cb142-7"><a href="l10-gis-iv.html#cb142-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(BIO, URI) <span class="sc">%&gt;%</span></span>
<span id="cb142-8"><a href="l10-gis-iv.html#cb142-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb142-9"><a href="l10-gis-iv.html#cb142-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-10"><a href="l10-gis-iv.html#cb142-10" aria-hidden="true" tabindex="-1"></a><span class="co"># the following loop is quite slow; use it as a reference for similar cases</span></span>
<span id="cb142-11"><a href="l10-gis-iv.html#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="co"># for (ID in idVector){</span></span>
<span id="cb142-12"><a href="l10-gis-iv.html#cb142-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   temp &lt;- TIgeoDataRichTOP %&gt;%</span></span>
<span id="cb142-13"><a href="l10-gis-iv.html#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="co">#     filter(BIO==ID)</span></span>
<span id="cb142-14"><a href="l10-gis-iv.html#cb142-14" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb142-15"><a href="l10-gis-iv.html#cb142-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   if(nrow(temp) &gt; 1){</span></span>
<span id="cb142-16"><a href="l10-gis-iv.html#cb142-16" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb142-17"><a href="l10-gis-iv.html#cb142-17" aria-hidden="true" tabindex="-1"></a><span class="co">#     rows &lt;- t(combn(sort(unique(temp$URI)), 2)) %&gt;%</span></span>
<span id="cb142-18"><a href="l10-gis-iv.html#cb142-18" aria-hidden="true" tabindex="-1"></a><span class="co">#       as.data.frame() %&gt;%</span></span>
<span id="cb142-19"><a href="l10-gis-iv.html#cb142-19" aria-hidden="true" tabindex="-1"></a><span class="co">#       mutate(BIO=ID) %&gt;%</span></span>
<span id="cb142-20"><a href="l10-gis-iv.html#cb142-20" aria-hidden="true" tabindex="-1"></a><span class="co">#       rename(FROM=V1) %&gt;%</span></span>
<span id="cb142-21"><a href="l10-gis-iv.html#cb142-21" aria-hidden="true" tabindex="-1"></a><span class="co">#       rename(TO=V2) %&gt;%</span></span>
<span id="cb142-22"><a href="l10-gis-iv.html#cb142-22" aria-hidden="true" tabindex="-1"></a><span class="co">#       select(BIO, FROM, TO)</span></span>
<span id="cb142-23"><a href="l10-gis-iv.html#cb142-23" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb142-24"><a href="l10-gis-iv.html#cb142-24" aria-hidden="true" tabindex="-1"></a><span class="co">#     NW_Data_Settl &lt;- rbind(NW_Data_Settl, rows)</span></span>
<span id="cb142-25"><a href="l10-gis-iv.html#cb142-25" aria-hidden="true" tabindex="-1"></a><span class="co">#   }</span></span>
<span id="cb142-26"><a href="l10-gis-iv.html#cb142-26" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb142-27"><a href="l10-gis-iv.html#cb142-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-28"><a href="l10-gis-iv.html#cb142-28" aria-hidden="true" tabindex="-1"></a><span class="co">#saveRDS(NW_Data_Settl, &quot;./data_temp/althurayya/TI_generated_edges.rds&quot;)</span></span>
<span id="cb142-29"><a href="l10-gis-iv.html#cb142-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-30"><a href="l10-gis-iv.html#cb142-30" aria-hidden="true" tabindex="-1"></a>NW_Data_Settl <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;./data_temp/althurayya/TI_generated_edges.rds&quot;</span>)</span>
<span id="cb142-31"><a href="l10-gis-iv.html#cb142-31" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NW_Data_Settl)</span></code></pre></div>
<pre><code>##        BIO             FROM               TO
## 1 TI000052 BASRA_477E304N_S HIJAZ_390E235N_R
## 2 TI000052 BASRA_477E304N_S         Yaman_RE
## 3 TI000052 HIJAZ_390E235N_R         Yaman_RE
## 4 TI000053           Rum_RE          Sham_RE
## 5 TI000054     Ifriqiyya_RE       Maghrib_RE
## 6 TI000054     Ifriqiyya_RE          Misr_RE</code></pre>
<p>The most important line of code in the chunk above is <code>t(combn(sort(unique(temp$URI)), 2))</code> — it allows you to generate all possible pairs from a list/vector of values. Let’s take a closer look at a smaller example:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="l10-gis-iv.html#cb144-1" aria-hidden="true" tabindex="-1"></a>vectorWithNodes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Baghdad&quot;</span>, <span class="st">&quot;Nishapur&quot;</span>, <span class="st">&quot;Basra&quot;</span>, <span class="st">&quot;Damascus&quot;</span>, <span class="st">&quot;Cairo&quot;</span>)</span>
<span id="cb144-2"><a href="l10-gis-iv.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb144-3"><a href="l10-gis-iv.html#cb144-3" aria-hidden="true" tabindex="-1"></a>edgesGenerated <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">combn</span>(<span class="fu">sort</span>(<span class="fu">unique</span>(vectorWithNodes)), <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb144-4"><a href="l10-gis-iv.html#cb144-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb144-5"><a href="l10-gis-iv.html#cb144-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">FROM=</span>V1) <span class="sc">%&gt;%</span></span>
<span id="cb144-6"><a href="l10-gis-iv.html#cb144-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TO=</span>V2) <span class="sc">%&gt;%</span></span>
<span id="cb144-7"><a href="l10-gis-iv.html#cb144-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(FROM, TO)</span>
<span id="cb144-8"><a href="l10-gis-iv.html#cb144-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-9"><a href="l10-gis-iv.html#cb144-9" aria-hidden="true" tabindex="-1"></a>edgesGenerated</span></code></pre></div>
<pre><code>##        FROM       TO
## 1   Baghdad    Basra
## 2   Baghdad    Cairo
## 3   Baghdad Damascus
## 4   Baghdad Nishapur
## 5     Basra    Cairo
## 6     Basra Damascus
## 7     Basra Nishapur
## 8     Cairo Damascus
## 9     Cairo Nishapur
## 10 Damascus Nishapur</code></pre>
<p>Now, let’s go back to our data and create a network from it: 1) we need to calculate weights of edges, by counting the number of the same edges; 2) create a network object and run the same analyses that we did before; 3) then we can map it.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="l10-gis-iv.html#cb146-1" aria-hidden="true" tabindex="-1"></a>NW_Data_Final <span class="ot">&lt;-</span> NW_Data_Settl <span class="sc">%&gt;%</span></span>
<span id="cb146-2"><a href="l10-gis-iv.html#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(FROM, TO) <span class="sc">%&gt;%</span></span>
<span id="cb146-3"><a href="l10-gis-iv.html#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">WEIGHT =</span> <span class="fu">n</span>())</span>
<span id="cb146-4"><a href="l10-gis-iv.html#cb146-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-5"><a href="l10-gis-iv.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NW_Data_Final)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   FROM [1]
##   FROM               TO                  WEIGHT
##   &lt;chr&gt;              &lt;chr&gt;                &lt;int&gt;
## 1 ABARQUH_532E311N_S BAGHDAD_443E333N_S       5
## 2 ABARQUH_532E311N_S BASRA_477E304N_S         1
## 3 ABARQUH_532E311N_S DIMASHQ_363E335N_S       3
## 4 ABARQUH_532E311N_S FASA_536E289N_S          1
## 5 ABARQUH_532E311N_S HAMADHAN_485E347N_S      2
## 6 ABARQUH_532E311N_S HARRAN_390E368N_S        3</code></pre>
<p>Now, the network and the analyses:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="l10-gis-iv.html#cb148-1" aria-hidden="true" tabindex="-1"></a>NW_Final <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d=</span>NW_Data_Final, <span class="at">directed=</span>F)</span>
<span id="cb148-2"><a href="l10-gis-iv.html#cb148-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-3"><a href="l10-gis-iv.html#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="co"># centrality measures</span></span>
<span id="cb148-4"><a href="l10-gis-iv.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>degree <span class="ot">&lt;-</span> <span class="fu">degree</span>(NW_Final, <span class="at">mode=</span><span class="st">&quot;all&quot;</span>)</span>
<span id="cb148-5"><a href="l10-gis-iv.html#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>eigenvector <span class="ot">&lt;-</span> <span class="fu">eigen_centrality</span>(NW_Final)<span class="sc">$</span>vector</span>
<span id="cb148-6"><a href="l10-gis-iv.html#cb148-6" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>betweenness <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(NW_Final, <span class="at">directed=</span>F)</span>
<span id="cb148-7"><a href="l10-gis-iv.html#cb148-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-8"><a href="l10-gis-iv.html#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="co"># clustering (selected algorithms) some of these alrgorithms may take a minute of two to run</span></span>
<span id="cb148-9"><a href="l10-gis-iv.html#cb148-9" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>cl_walktrap <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_walktrap</span>(NW_Final)<span class="sc">$</span>membership)</span>
<span id="cb148-10"><a href="l10-gis-iv.html#cb148-10" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>cl_leading_eigen <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_leading_eigen</span>(NW_Final)<span class="sc">$</span>membership)</span>
<span id="cb148-11"><a href="l10-gis-iv.html#cb148-11" aria-hidden="true" tabindex="-1"></a><span class="co">#V(NW_Final)$cl_edge_betweenness &lt;- as.character(cluster_edge_betweenness(NW_Final)$membership) # too slow</span></span>
<span id="cb148-12"><a href="l10-gis-iv.html#cb148-12" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>cl_fast_greedy <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_fast_greedy</span>(NW_Final)<span class="sc">$</span>membership) <span class="co"># too slow</span></span>
<span id="cb148-13"><a href="l10-gis-iv.html#cb148-13" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(NW_Final)<span class="sc">$</span>cl_louvain <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="fu">cluster_louvain</span>(NW_Final)<span class="sc">$</span>membership)</span>
<span id="cb148-14"><a href="l10-gis-iv.html#cb148-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-15"><a href="l10-gis-iv.html#cb148-15" aria-hidden="true" tabindex="-1"></a><span class="co"># extract nodes/vertices for mapping</span></span>
<span id="cb148-16"><a href="l10-gis-iv.html#cb148-16" aria-hidden="true" tabindex="-1"></a>NW_Final_Nodes <span class="ot">&lt;-</span> <span class="fu">as_data_frame</span>(NW_Final, <span class="at">what=</span><span class="st">&quot;vertices&quot;</span>)</span>
<span id="cb148-17"><a href="l10-gis-iv.html#cb148-17" aria-hidden="true" tabindex="-1"></a>NW_Final_Nodes <span class="ot">&lt;-</span> NW_Final_Nodes <span class="sc">%&gt;%</span></span>
<span id="cb148-18"><a href="l10-gis-iv.html#cb148-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">URI =</span> name) <span class="sc">%&gt;%</span></span>
<span id="cb148-19"><a href="l10-gis-iv.html#cb148-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mapLayer, <span class="at">by=</span><span class="st">&quot;URI&quot;</span>)</span>
<span id="cb148-20"><a href="l10-gis-iv.html#cb148-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-21"><a href="l10-gis-iv.html#cb148-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(NW_Final_Nodes)</span></code></pre></div>
<pre><code>##                      URI degree eigenvector betweenness cl_walktrap
## 1     ABARQUH_532E311N_S     27   0.1840470   0.7883412           1
## 2     ABBADAN_482E303N_S     33   0.2109195   6.9540647           1
## 3       ABHAR_492E361N_S     19   0.1408456   0.6810167           1
## 4     ABIWARD_595E372N_S     29   0.1951078   2.5690766           1
## 5      ADHANA_353E369N_S     43   0.2970296   2.2739657           1
## 6 ADHARBAYJAN_479E382N_R    136   0.7183017 212.2573361           3
##   cl_leading_eigen cl_fast_greedy cl_louvain    REG_MESO    aRegion         TR
## 1                1              2          2     Fars_RE SW_Iran_MR    Abarqūh
## 2                3              2          2     Iraq_RE    Iraq_MR   ʿAbbādān
## 3                3              3          3    Jibal_RE NW_Iran_MR      Abhar
## 4                1              2          2 Khurasan_RE NE_Iran_MR    Abīward
## 5                3              2          2     Sham_RE    Sham_MR     Aḏanaŧ
## 6                1              2          4    Rihab_RE    Qabq_MR Aḏarbayǧān
##        SEARCH   EN        TYPE      LON      LAT       AR   AR_Alt  AR_Sort
## 1     Abarquh &lt;NA&gt;       towns 53.25737 31.15094   أبرقوه   أبرقوه   ابرقوه
## 2     Abbadan &lt;NA&gt;       towns 48.27394 30.33563   عبادان   عبادان   عبادان
## 3       Abhar &lt;NA&gt;       towns 49.23473 36.15722     أبهر     أبهر     ابهر
## 4     Abiward &lt;NA&gt;       towns 59.59733 37.27000   أبيورد   أبيورد   ابيورد
## 5      Adhana &lt;NA&gt; waystations 35.34272 36.96023     أذنة     أذنة     اذنة
## 6 Adharbayjan &lt;NA&gt;     regions 47.95801 38.24076 أذربيجان أذربيجان اذربيجان
##   AMBIG TRUETOP     TOPO
## 1     0       0   ابرقوه
## 2     0       0   عبادان
## 3     0       0     ابهر
## 4     0       0   ابيورد
## 5     0       0     اذنة
## 6     0       1 اذربيجان</code></pre>
<p>Now, we can map results of our analysis:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="l10-gis-iv.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(NW_Final_Nodes<span class="sc">$</span>cl_louvain)</span></code></pre></div>
<pre><code>## [1] &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="l10-gis-iv.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>)</span>
<span id="cb152-2"><a href="l10-gis-iv.html#cb152-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-3"><a href="l10-gis-iv.html#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="co"># final map</span></span>
<span id="cb152-4"><a href="l10-gis-iv.html#cb152-4" aria-hidden="true" tabindex="-1"></a>currentMap <span class="ot">&lt;-</span> IslamicWorldBaseBare <span class="sc">+</span> </span>
<span id="cb152-5"><a href="l10-gis-iv.html#cb152-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_encircle(data=mapLayer_Filtered, s_shape=.1, expand=0.01, alpha=.15, aes(x=LON, y=LAT, col=aRegion, fill=aRegion, group=aRegion)) +</span></span>
<span id="cb152-6"><a href="l10-gis-iv.html#cb152-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>NW_Final_Nodes, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">color=</span>cl_louvain, <span class="at">size=</span>degree), <span class="at">alpha=</span><span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb152-7"><a href="l10-gis-iv.html#cb152-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label=</span><span class="st">&quot;TI (700): cl_louvain&quot;</span>, <span class="at">x=</span><span class="dv">80</span>, <span class="at">y=</span><span class="fl">12.5</span>, <span class="at">angle=</span><span class="dv">0</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">vjust=</span><span class="dv">0</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb152-8"><a href="l10-gis-iv.html#cb152-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb152-9"><a href="l10-gis-iv.html#cb152-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb152-10"><a href="l10-gis-iv.html#cb152-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb152-11"><a href="l10-gis-iv.html#cb152-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="dv">5</span>))</span>
<span id="cb152-12"><a href="l10-gis-iv.html#cb152-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb152-13"><a href="l10-gis-iv.html#cb152-13" aria-hidden="true" tabindex="-1"></a><span class="co"># and saving</span></span>
<span id="cb152-14"><a href="l10-gis-iv.html#cb152-14" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(currentMap))</span>
<span id="cb152-15"><a href="l10-gis-iv.html#cb152-15" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb152-16"><a href="l10-gis-iv.html#cb152-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_TI_000_700_cl_louvain.png&quot;</span>),</span>
<span id="cb152-17"><a href="l10-gis-iv.html#cb152-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb152-18"><a href="l10-gis-iv.html#cb152-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="fl">8.4</span>,<span class="at">height=</span><span class="fl">4.65</span>)</span></code></pre></div>
<p><img src="files/networks/IW_TI_000_700_cl_louvain.png" /></p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="l10-gis-iv.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(NW_Final_Nodes<span class="sc">$</span>cl_walktrap)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;3&quot; &quot;2&quot; &quot;4&quot;</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="l10-gis-iv.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12</span>)</span>
<span id="cb155-2"><a href="l10-gis-iv.html#cb155-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-3"><a href="l10-gis-iv.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="co"># final map</span></span>
<span id="cb155-4"><a href="l10-gis-iv.html#cb155-4" aria-hidden="true" tabindex="-1"></a>currentMap <span class="ot">&lt;-</span> IslamicWorldBaseBare <span class="sc">+</span> </span>
<span id="cb155-5"><a href="l10-gis-iv.html#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#geom_encircle(data=mapLayer_Filtered, s_shape=.1, expand=0.01, alpha=.15, aes(x=LON, y=LAT, col=aRegion, fill=aRegion, group=aRegion)) +</span></span>
<span id="cb155-6"><a href="l10-gis-iv.html#cb155-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>NW_Final_Nodes, <span class="fu">aes</span>(<span class="at">x=</span>LON, <span class="at">y=</span>LAT, <span class="at">color=</span>cl_walktrap, <span class="at">size=</span>degree), <span class="at">alpha=</span><span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb155-7"><a href="l10-gis-iv.html#cb155-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label=</span><span class="st">&quot;TI (700): cl_walktrap&quot;</span>, <span class="at">x=</span><span class="dv">80</span>, <span class="at">y=</span><span class="fl">12.5</span>, <span class="at">angle=</span><span class="dv">0</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">vjust=</span><span class="dv">0</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">alpha=</span><span class="dv">1</span>, <span class="at">fontface=</span><span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb155-8"><a href="l10-gis-iv.html#cb155-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LON)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb155-9"><a href="l10-gis-iv.html#cb155-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">ylim=</span><span class="fu">c</span>(<span class="fu">min</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">-</span><span class="dv">1</span>, <span class="fu">max</span>(althurayyaNodesFilt<span class="sc">$</span>LAT)<span class="sc">+</span><span class="dv">1</span>),</span>
<span id="cb155-10"><a href="l10-gis-iv.html#cb155-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">expand=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb155-11"><a href="l10-gis-iv.html#cb155-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="dv">5</span>))</span>
<span id="cb155-12"><a href="l10-gis-iv.html#cb155-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb155-13"><a href="l10-gis-iv.html#cb155-13" aria-hidden="true" tabindex="-1"></a><span class="co"># and saving</span></span>
<span id="cb155-14"><a href="l10-gis-iv.html#cb155-14" aria-hidden="true" tabindex="-1"></a>gt <span class="ot">&lt;-</span> <span class="fu">ggplot_gtable</span>(<span class="fu">ggplot_build</span>(currentMap))</span>
<span id="cb155-15"><a href="l10-gis-iv.html#cb155-15" aria-hidden="true" tabindex="-1"></a>ge <span class="ot">&lt;-</span> <span class="fu">subset</span>(gt<span class="sc">$</span>layout, name <span class="sc">==</span> <span class="st">&quot;panel&quot;</span>)</span>
<span id="cb155-16"><a href="l10-gis-iv.html#cb155-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">file=</span><span class="fu">paste0</span>(<span class="st">&quot;./files/networks/IW_TI_000_700_cl_walktrap.png&quot;</span>),</span>
<span id="cb155-17"><a href="l10-gis-iv.html#cb155-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot=</span><span class="fu">grid.draw</span>(gt[ge<span class="sc">$</span>t<span class="sc">:</span>ge<span class="sc">$</span>b, ge<span class="sc">$</span>l<span class="sc">:</span>ge<span class="sc">$</span>r]),</span>
<span id="cb155-18"><a href="l10-gis-iv.html#cb155-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi=</span><span class="dv">300</span>,<span class="at">width=</span><span class="fl">8.4</span>,<span class="at">height=</span><span class="fl">4.65</span>)</span></code></pre></div>
<p><img src="files/networks/IW_TI_000_700_cl_walktrap.png" /></p>
<blockquote>
<p><em>Assignment</em>:</p>
</blockquote>
</div>
</div>
<div id="wien-network" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> Wien Network</h2>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="l10-gis-iv.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">5</span>)</span>
<span id="cb156-2"><a href="l10-gis-iv.html#cb156-2" aria-hidden="true" tabindex="-1"></a>wien <span class="ot">&lt;-</span> <span class="fu">graph_from_literal</span>(</span>
<span id="cb156-3"><a href="l10-gis-iv.html#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">--</span><span class="dv">2</span><span class="sc">:</span><span class="dv">3</span><span class="sc">:</span><span class="dv">4</span><span class="sc">:</span><span class="dv">6</span><span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">8</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">2</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">20</span><span class="sc">:</span><span class="dv">22</span><span class="sc">:</span><span class="dv">11</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">3</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span><span class="sc">:</span><span class="dv">11</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">4</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb156-4"><a href="l10-gis-iv.html#cb156-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span><span class="sc">--</span><span class="dv">6</span><span class="sc">:</span><span class="dv">4</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">12</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">6</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span><span class="sc">:</span><span class="dv">5</span><span class="sc">:</span><span class="dv">12</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">6-7</span>, <span class="dv">7</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">6</span><span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">16</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">8</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">7</span><span class="sc">:</span><span class="dv">16</span><span class="sc">:</span><span class="dv">17</span><span class="sc">:</span><span class="dv">9</span>,</span>
<span id="cb156-5"><a href="l10-gis-iv.html#cb156-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span><span class="sc">--</span><span class="dv">1</span><span class="sc">:</span><span class="dv">8</span><span class="sc">:</span><span class="dv">17</span><span class="sc">:</span><span class="dv">19</span><span class="sc">:</span><span class="dv">20</span>, <span class="dv">10</span><span class="sc">--</span><span class="dv">3</span><span class="sc">:</span><span class="dv">11</span><span class="sc">:</span><span class="dv">23</span><span class="sc">:</span><span class="dv">12</span><span class="sc">:</span><span class="dv">5</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">11</span><span class="sc">--</span><span class="dv">2</span><span class="sc">:</span><span class="dv">22</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">12</span><span class="sc">--</span><span class="dv">5</span><span class="sc">:</span><span class="dv">10</span><span class="sc">:</span><span class="dv">23</span><span class="sc">:</span><span class="dv">13</span><span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">6</span>,</span>
<span id="cb156-6"><a href="l10-gis-iv.html#cb156-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">13</span><span class="sc">--</span><span class="dv">12</span><span class="sc">:</span><span class="dv">23</span><span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">15</span>, <span class="dv">14</span><span class="sc">--</span><span class="dv">13</span><span class="sc">:</span><span class="dv">17</span><span class="sc">:</span><span class="dv">16</span><span class="sc">:</span><span class="dv">15</span>, <span class="dv">15</span><span class="sc">--</span><span class="dv">6</span><span class="sc">:</span><span class="dv">12</span><span class="sc">:</span><span class="dv">13</span><span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">16</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">16</span><span class="sc">--</span><span class="dv">7</span><span class="sc">:</span><span class="dv">15</span><span class="sc">:</span><span class="dv">14</span><span class="sc">:</span><span class="dv">17</span><span class="sc">:</span><span class="dv">8</span>,</span>
<span id="cb156-7"><a href="l10-gis-iv.html#cb156-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">17</span><span class="sc">--</span><span class="dv">14</span><span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">9</span><span class="sc">:</span><span class="dv">8</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">18</span><span class="sc">--</span><span class="dv">9</span><span class="sc">:</span><span class="dv">17</span><span class="sc">:</span><span class="dv">19</span>, <span class="dv">19</span><span class="sc">--</span><span class="dv">9</span><span class="sc">:</span><span class="dv">18</span><span class="sc">:</span><span class="dv">21</span><span class="sc">:</span><span class="dv">20</span>, <span class="dv">20</span><span class="sc">--</span><span class="dv">2</span><span class="sc">:</span><span class="dv">9</span><span class="sc">:</span><span class="dv">19</span><span class="sc">:</span><span class="dv">21</span>,</span>
<span id="cb156-8"><a href="l10-gis-iv.html#cb156-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">22</span><span class="sc">--</span><span class="dv">2</span><span class="sc">:</span><span class="dv">20</span><span class="sc">:</span><span class="dv">21</span><span class="sc">:</span><span class="dv">11</span>, <span class="dv">23</span><span class="sc">--</span><span class="dv">10</span><span class="sc">:</span><span class="dv">13</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb156-9"><a href="l10-gis-iv.html#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wien)</span></code></pre></div>
<p><img src="RGIS2021S_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
</div>
<div id="AM10" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> Additional Materials on Networks in R</h2>
<ul>
<li><p>Katherine Ognyanova (2017-2018). <em>Static and dynamic network visualization with R</em>. <a href="https://kateto.net/network-visualization" class="uri">https://kateto.net/network-visualization</a>.</p></li>
<li><p><em>Chapter 6</em> in: Arnold, Taylor, and Lauren Tilton. 2015. <em>Humanities Data in R</em>. New York, NY: Springer Science+Business Media.</p></li>
<li><p>See also: Chapter 1 in Yunran Chen. <em>Introduction to Network Analysis Using R</em> (<a href="https://yunranchen.github.io/intro-net-r/index.html" class="uri">https://yunranchen.github.io/intro-net-r/index.html</a>)</p></li>
<li><p>Jesse Sadler. 2017. <em>Introduction to Network Analysis with R: Creating static and interactive network graphs</em>, <a href="https://www.jessesadler.com/post/network-analysis-with-r/" class="uri">https://www.jessesadler.com/post/network-analysis-with-r/</a>.</p></li>
<li><p>On communities:</p>
<ul>
<li><a href="http://networksciencebook.com/chapter/9" class="uri">http://networksciencebook.com/chapter/9</a>.</li>
<li><a href="https://www.r-bloggers.com/summary-of-community-detection-algorithms-in-igraph-0-6/" class="uri">https://www.r-bloggers.com/summary-of-community-detection-algorithms-in-igraph-0-6/</a></li>
<li><a href="https://stackoverflow.com/questions/9471906/what-are-the-differences-between-community-detection-algorithms-in-igraph/" class="uri">https://stackoverflow.com/questions/9471906/what-are-the-differences-between-community-detection-algorithms-in-igraph/</a></li>
</ul></li>
</ul>
</div>
<div id="HW10" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> Homework</h2>
<p>Submit your knitted notebook.</p>
</div>
<div id="SH10" class="section level2" number="10.8">
<h2><span class="header-section-number">10.8</span> Submitting homework</h2>
<ul>
<li>Homework assignment must be submitted by the beginning of the next class;</li>
<li>Email your homework to the instructor as attachments.
<ul>
<li>In the subject of your email, please, add the following: <code>070184-LXX-HW-YourLastName-YourMatriculationNumber</code>, where <code>LXX</code> is the numnber of the lesson for which you submit homework; <code>YourLastName</code> is your last name; and <code>YourMatriculationNumber</code> is your matriculation number.</li>
</ul></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="l09-gis-iii.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="l11-gis-v.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "github"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

</body>

</html>
